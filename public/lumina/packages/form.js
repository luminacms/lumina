"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){function s(e){this.index=++f.index,this.config=S.extend({},this.config,f.config,e),this.init()}var e,t,n=window.layui&&layui.define,l={getPath:(e=document.currentScript?document.currentScript.src:function(){for(var e,t=document.scripts,n=t.length-1,a=n;0<a;a--)if("interactive"===t[a].readyState){e=t[a].src;break}return e||t[n].src}()).substring(0,e.lastIndexOf("/")+1),getStyle:function(e,t){var n=e.currentStyle?e.currentStyle:window.getComputedStyle(e,null);return n[n.getPropertyValue?"getPropertyValue":"getAttribute"](t)},link:function(e,t,n){var a,i,r,o;f.path&&(a=document.getElementsByTagName("head")[0],i=document.createElement("link"),"string"==typeof t&&(n=t),r="layuicss-"+(n||e).replace(/\.|\//g,""),o=0,i.rel="stylesheet",i.href=f.path+e,i.id=r,document.getElementById(r)||a.appendChild(i),"function"==typeof t&&function e(){return 80<++o?window.console&&void 0:void(1989===parseInt(l.getStyle(document.getElementById(r),"width"))?t():setTimeout(e,100))}())}},f={v:"5.0.9",config:{},index:window.laydate&&window.laydate.v?1e5:0,path:l.getPath,set:function(e){var t=this;return t.config=S.extend({},t.config,e),t},ready:function(){f.v;return this}},b="layui-this",T="laydate-disabled",d="开始日期超出了结束日期<br>建议重新选择",y=[100,2e5],c="layui-laydate-static",k="layui-laydate-list",u="laydate-selected",a="layui-laydate-hint",M=".laydate-btns-confirm",E="laydate-time-text",_=".laydate-btns-time",S=function(e){return new i(e)},i=function(e){for(var t=0,n="object"===_typeof(e)?[e]:(this.selector=e,document.querySelectorAll(e||null));t<n.length;t++)this.push(n[t])};i.prototype=[],i.prototype.constructor=i,S.extend=function(){var e=1,t=arguments;for(t[0]="object"===_typeof(t[0])?t[0]:{};e<t.length;e++)"object"===_typeof(t[e])&&!function e(t,n){for(var a in t=t||(n.constructor===Array?[]:{}),n)t[a]=n[a]&&n[a].constructor===Object?e(t[a],n[a]):n[a];return t}(t[0],t[e]);return t[0]},S.ie=(t=navigator.userAgent.toLowerCase(),!!(window.ActiveXObject||"ActiveXObject"in window)&&((t.match(/msie\s(\d+)/)||[])[1]||"11")),S.stope=function(e){(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0},S.each=function(e,t){var n;if("function"!=typeof t)return this;if((e=e||[]).constructor===Object){for(n in e)if(t.call(e[n],n,e[n]))break}else for(n=0;n<e.length&&!t.call(e[n],n,e[n]);n++);return this},S.digit=function(e,t,n){var a="";t=t||2;for(var i=(e=String(e)).length;i<t;i++)a+="0";return e<Math.pow(10,t)?a+(0|e):e},S.elem=function(e,t){var n=document.createElement(e);return S.each(t||{},function(e,t){n.setAttribute(e,t)}),n},i.addStr=function(n,e){return n=n.replace(/\s+/," "),e=e.replace(/\s+/," ").split(" "),S.each(e,function(e,t){new RegExp("\\b"+t+"\\b").test(n)||(n=n+" "+t)}),n.replace(/^\s|\s$/,"")},i.removeStr=function(a,e){return a=a.replace(/\s+/," "),e=e.replace(/\s+/," ").split(" "),S.each(e,function(e,t){var n=new RegExp("\\b"+t+"\\b");n.test(a)&&(a=a.replace(n,""))}),a.replace(/\s+/," ").replace(/^\s|\s$/,"")},i.prototype.find=function(a){var i=this,r=0,o=[],l="object"===_typeof(a);return this.each(function(e,t){for(var n=l?[a]:t.querySelectorAll(a||null);r<n.length;r++)o.push(n[r]);i.shift()}),l||(i.selector=(i.selector?i.selector+" ":"")+a),S.each(o,function(e,t){i.push(t)}),i},i.prototype.each=function(e){return S.each.call(this,this,e)},i.prototype.addClass=function(n,a){return this.each(function(e,t){t.className=i[a?"removeStr":"addStr"](t.className,n)})},i.prototype.removeClass=function(e){return this.addClass(e,!0)},i.prototype.hasClass=function(n){var a=!1;return this.each(function(e,t){new RegExp("\\b"+n+"\\b").test(t.className)&&(a=!0)}),a},i.prototype.attr=function(n,a){var e=this;return void 0===a?function(){if(0<e.length)return e[0].getAttribute(n)}():e.each(function(e,t){t.setAttribute(n,a)})},i.prototype.removeAttr=function(n){return this.each(function(e,t){t.removeAttribute(n)})},i.prototype.html=function(n){return this.each(function(e,t){t.innerHTML=n})},i.prototype.val=function(n){return this.each(function(e,t){t.value=n})},i.prototype.append=function(n){return this.each(function(e,t){"object"===_typeof(n)?t.appendChild(n):t.innerHTML=t.innerHTML+n})},i.prototype.remove=function(n){return this.each(function(e,t){n?t.removeChild(n):t.parentNode.removeChild(t)})},i.prototype.on=function(n,a){return this.each(function(e,t){t.attachEvent?t.attachEvent("on"+n,function(e){e.target=e.srcElement,a.call(t,e)}):t.addEventListener(n,a,!1)})},i.prototype.off=function(n,a){return this.each(function(e,t){t.detachEvent?t.detachEvent("on"+n,a):t.removeEventListener(n,a,!1)})},s.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},s.prototype.config={type:"date",range:!1,format:"yyyy-MM-dd",value:null,isInitValue:!0,min:"1900-1-1",max:"2099-12-31",trigger:"focus",show:!1,showBottom:!0,btns:["clear","now","confirm"],lang:"cn",theme:"default",position:null,calendar:!1,mark:{},zIndex:null,done:null,change:null},s.prototype.lang=function(){var e={cn:{weeks:["日","一","二","三","四","五","六"],time:["时","分","秒"],timeTips:"选择时间",startTime:"开始时间",endTime:"结束时间",dateTips:"返回日期",month:["一","二","三","四","五","六","七","八","九","十","十一","十二"],tools:{confirm:"确定",clear:"清空",now:"现在"}},en:{weeks:["Su","Mo","Tu","We","Th","Fr","Sa"],time:["Hours","Minutes","Seconds"],timeTips:"Select Time",startTime:"Start Time",endTime:"End Time",dateTips:"Select Date",month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tools:{confirm:"Confirm",clear:"Clear",now:"Now"}}};return e[this.config.lang]||e.cn},s.prototype.init=function(){var a=this,l=a.config,i="yyyy|y|MM|M|dd|d|HH|H|mm|m|ss|s",e="static"===l.position,t={year:"yyyy",month:"yyyy-MM",date:"yyyy-MM-dd",time:"HH:mm:ss",datetime:"yyyy-MM-dd HH:mm:ss"};l.elem=S(l.elem),l.eventElem=S(l.eventElem),l.elem[0]&&(!0===l.range&&(l.range="-"),l.format===t.date&&(l.format=t[l.type]),a.format=l.format.match(new RegExp(i+"|.","g"))||[],a.EXP_IF="",a.EXP_SPLIT="",S.each(a.format,function(e,t){var n=new RegExp(i).test(t)?"\\d{"+(new RegExp(i).test(a.format[0===e?e+1:e-1]||"")?/^yyyy|y$/.test(t)?4:t.length:/^yyyy$/.test(t)?"1,4":/^y$/.test(t)?"1,308":"1,2")+"}":"\\"+t;a.EXP_IF=a.EXP_IF+n,a.EXP_SPLIT=a.EXP_SPLIT+"("+n+")"}),a.EXP_IF=new RegExp("^"+(l.range?a.EXP_IF+"\\s\\"+l.range+"\\s"+a.EXP_IF:a.EXP_IF)+"$"),a.EXP_SPLIT=new RegExp("^"+a.EXP_SPLIT+"$",""),a.isInput(l.elem[0])||"focus"===l.trigger&&(l.trigger="click"),l.elem.attr("lay-key")||(l.elem.attr("lay-key",a.index),l.eventElem.attr("lay-key",a.index)),l.mark=S.extend({},l.calendar&&"cn"===l.lang?{"0-1-1":"元旦","0-2-14":"情人","0-3-8":"妇女","0-3-12":"植树","0-4-1":"愚人","0-5-1":"劳动","0-5-4":"青年","0-6-1":"儿童","0-9-10":"教师","0-9-18":"国耻","0-10-1":"国庆","0-12-25":"圣诞"}:{},l.mark),S.each(["min","max"],function(e,t){var n,a,i,r=[],o=[];"number"==typeof l[t]?(n=l[t],a=(new Date).getTime(),r=[(i=new Date(n?n<864e5?a+864e5*n:n:a)).getFullYear(),i.getMonth()+1,i.getDate()],n<864e5||(o=[i.getHours(),i.getMinutes(),i.getSeconds()])):(r=(l[t].match(/\d+-\d+-\d+/)||[""])[0].split("-"),o=(l[t].match(/\d+:\d+:\d+/)||[""])[0].split(":")),l[t]={year:0|r[0]||(new Date).getFullYear(),month:r[1]?(0|r[1])-1:(new Date).getMonth(),date:0|r[2]||(new Date).getDate(),hours:0|o[0],minutes:0|o[1],seconds:0|o[2]}}),a.elemID="layui-laydate"+l.elem.attr("lay-key"),(l.show||e)&&a.render(),e||a.events(),l.value&&l.isInitValue&&(l.value.constructor===Date?a.setValue(a.parse(0,a.systemDate(l.value))):a.setValue(l.value)))},s.prototype.render=function(){var e,a,t,n,i=this,f=i.config,y=i.lang(),r="static"===f.position,o=i.elem=S.elem("div",{id:i.elemID,class:["layui-laydate",f.range?" layui-laydate-range":"",r?" "+c:"",f.theme&&"default"!==f.theme&&!/^#/.test(f.theme)?" laydate-theme-"+f.theme:""].join("")}),p=i.elemMain=[],v=i.elemHeader=[],g=i.elemCont=[],D=i.table=[],l=i.footer=S.elem("div",{class:"layui-laydate-footer"});f.zIndex&&(o.style.zIndex=f.zIndex),S.each(new Array(2),function(e){if(!f.range&&0<e)return!0;var t,n,a,i,r,o,l,s=S.elem("div",{class:"layui-laydate-header"}),d=[((l=S.elem("i",{class:"fa laydate-icon fa-angle-double-left"})).innerHTML="",l),((o=S.elem("i",{class:"fa laydate-icon fa-angle-left"})).innerHTML="",o),(a=S.elem("div",{class:"laydate-set-ym"}),i=S.elem("span"),r=S.elem("span"),a.appendChild(i),a.appendChild(r),a),((n=S.elem("i",{class:"fa laydate-icon fa-angle-right"})).innerHTML="",n),((t=S.elem("i",{class:"fa laydate-icon fa-angle-double-right ml-3"})).innerHTML="",t)],c=S.elem("div",{class:"layui-laydate-content"}),u=S.elem("table"),m=S.elem("thead"),h=S.elem("tr");S.each(d,function(e,t){s.appendChild(t)}),m.appendChild(h),S.each(new Array(6),function(n){var a=u.insertRow(0);S.each(new Array(7),function(e){var t;0===n&&((t=S.elem("th")).innerHTML=y.weeks[e],h.appendChild(t)),a.insertCell(e)})}),u.insertBefore(m,u.children[0]),c.appendChild(u),p[e]=S.elem("div",{class:"layui-laydate-main laydate-main-list-"+e}),p[e].appendChild(s),p[e].appendChild(c),v.push(d),g.push(c),D.push(u)}),S(l).html((e=[],a=[],"datetime"===f.type&&e.push('<span lay-type="datetime" class="laydate-btns-time">'+y.timeTips+"</span>"),S.each(f.btns,function(e,t){var n=y.tools[t]||"btn";f.range&&"now"===t||(r&&"clear"===t&&(n="cn"===f.lang?"重置":"Reset"),a.push('<span lay-type="'+t+'" class="laydate-btns-'+t+'">'+n+"</span>"))}),e.push('<div class="laydate-footer-btns">'+a.join("")+"</div>"),e.join(""))),S.each(p,function(e,t){o.appendChild(t)}),f.showBottom&&o.appendChild(l),/^#/.test(f.theme)&&(t=S.elem("style"),n=["#{{id}} .layui-laydate-header{background-color:{{theme}};}","#{{id}} .layui-this{background-color:{{theme}} !important;}"].join("").replace(/{{id}}/g,i.elemID).replace(/{{theme}}/g,f.theme),"styleSheet"in t?(t.setAttribute("type","text/css"),t.styleSheet.cssText=n):t.innerHTML=n,S(o).addClass("laydate-theme-molv"),o.appendChild(t)),i.remove(s.thisElemDate),r?f.elem.append(o):(document.body.appendChild(o),i.position()),i.checkDate().calendar(),i.changeEvent(),s.thisElemDate=i.elemID,"function"==typeof f.ready&&f.ready(S.extend({},f.dateTime,{month:f.dateTime.month+1}))},s.prototype.remove=function(e){this.config;var t=S("#"+(e||this.elemID));return t.hasClass(c)||this.checkDate(function(){t.remove()}),this},s.prototype.position=function(){function e(e){return e=e?"scrollLeft":"scrollTop",document.body[e]|document.documentElement[e]}function t(e){return document.documentElement[e?"clientWidth":"clientHeight"]}var n=this,a=n.config,i=(n.bindElem||a.elem[0]).getBoundingClientRect(),r=n.elem.offsetWidth,o=n.elem.offsetHeight,l=i.left,s=i.bottom;l+r+5>t("width")&&(l=t("width")-r-5),s+o+5>t()&&(s=i.top>o?i.top-o:t()-o,s-=10),a.position&&(n.elem.style.position=a.position),n.elem.style.left=l+("fixed"===a.position?0:e(1))+"px",n.elem.style.top=s+("fixed"===a.position?0:e())+"px"},s.prototype.hint=function(e){var t=this,n=(t.config,S.elem("div",{class:a}));t.elem&&(n.innerHTML=e||"",S(t.elem).find("."+a).remove(),t.elem.appendChild(n),clearTimeout(t.hinTimer),t.hinTimer=setTimeout(function(){S(t.elem).find("."+a).remove()},3e3))},s.prototype.getAsYM=function(e,t,n){return n?t--:t++,t<0&&(t=11,e--),11<t&&(t=0,e++),[e,t]},s.prototype.systemDate=function(e){var t=e||new Date;return{year:t.getFullYear(),month:t.getMonth(),date:t.getDate(),hours:e?e.getHours():0,minutes:e?e.getMinutes():0,seconds:e?e.getSeconds():0}},s.prototype.checkDate=function(e){function t(e){e.year>y[1]&&(e.year=y[1],l=!0),11<e.month&&(e.month=11,l=!0),23<e.hours&&(e.hours=0,l=!0),59<e.minutes&&(e.minutes=0,e.hours++,l=!0),59<e.seconds&&(e.seconds=0,e.minutes++,l=!0),a=f.getEndDate(e.month+1,e.year),e.date>a&&(e.date=a,l=!0)}function n(a,i,r){var o=["startTime","endTime"];i=(i.match(s.EXP_SPLIT)||[]).slice(1),r=r||0,d.range&&(s[o[r]]=s[o[r]]||{}),S.each(s.format,function(e,t){var n=parseFloat(i[e]);i[e].length<t.length&&(l=!0),/yyyy|y/.test(t)?(n<y[0]&&(n=y[0],l=!0),a.year=n):/MM|M/.test(t)?(n<1&&(n=1,l=!0),a.month=n-1):/dd|d/.test(t)?(n<1&&(n=1,l=!0),a.date=n):/HH|H/.test(t)?(n<1&&(l=!(n=0)),a.hours=n,d.range&&(s[o[r]].hours=n)):/mm|m/.test(t)?(n<1&&(l=!(n=0)),a.minutes=n,d.range&&(s[o[r]].minutes=n)):/ss|s/.test(t)&&(n<1&&(l=!(n=0)),a.seconds=n,d.range&&(s[o[r]].seconds=n))}),t(a)}var a,l,s=this,d=(new Date,s.config),i=d.dateTime=d.dateTime||s.systemDate(),r=s.bindElem||d.elem[0],o=(s.isInput(r),s.isInput(r)?r.value:"static"===d.position?"":r.innerHTML);return"limit"===e?t(i):("string"==typeof(o=o||d.value)&&(o=o.replace(/\s+/g," ").replace(/^\s|\s$/g,"")),s.startState&&!s.endState&&(delete s.startState,s.endState=!0),"string"==typeof o&&o?s.EXP_IF.test(o)?d.range?(o=o.split(" "+d.range+" "),s.startDate=s.startDate||s.systemDate(),s.endDate=s.endDate||s.systemDate(),d.dateTime=S.extend({},s.startDate),S.each([s.startDate,s.endDate],function(e,t){n(t,o[e],e)})):n(i,o):(s.hint("日期格式不合法<br>必须遵循下述格式：<br>"+(d.range?d.format+" "+d.range+" "+d.format:d.format)+"<br>已为你重置"),l=!0):o&&o.constructor===Date?d.dateTime=s.systemDate(o):(d.dateTime=s.systemDate(),delete s.startState,delete s.endState,delete s.startDate,delete s.endDate,delete s.startTime,delete s.endTime),t(i),l&&o&&s.setValue(!d.range||s.endDate?s.parse():""),e&&e()),s},s.prototype.mark=function(e,a){var i,t=this.config;return S.each(t.mark,function(e,t){var n=e.split("-");n[0]!=a[0]&&0!=n[0]||n[1]!=a[1]&&0!=n[1]||n[2]!=a[2]||(i=t||a[2])}),i&&e.html('<span class="laydate-day-mark">'+i+"</span>"),this},s.prototype.limit=function(e,t,n,i){var a,r=this,o=r.config,l={},s=o[41<n?"endDate":"dateTime"],d=S.extend({},s,t||{});return S.each({now:d,min:o.min,max:o.max},function(e,n){var a;l[e]=r.newDate(S.extend({year:n.year,month:n.month,date:n.date},(a={},S.each(i,function(e,t){a[t]=n[t]}),a))).getTime()}),a=l.now<l.min||l.now>l.max,e&&e[a?"addClass":"removeClass"](T),a},s.prototype.calendar=function(e){var i,r,o,t,l=this,s=l.config,d=e||s.dateTime,n=new Date,a=l.lang(),c="date"!==s.type&&"datetime"!==s.type,u=e?1:0,m=S(l.table[u]).find("td"),h=S(l.elemHeader[u][2]).find("span");return d.year<y[0]&&(d.year=y[0],l.hint("最低只能支持到公元"+y[0]+"年")),d.year>y[1]&&(d.year=y[1],l.hint("最高只能支持到公元"+y[1]+"年")),l.firstDate||(l.firstDate=S.extend({},d)),n.setFullYear(d.year,d.month,1),i=n.getDay(),r=f.getEndDate(d.month||12,d.year),o=f.getEndDate(d.month+1,d.year),S.each(m,function(e,t){var n=[d.year,d.month],a=0;(t=S(t)).removeAttr("class"),e<i?(a=r-i+e,t.addClass("laydate-day-prev"),n=l.getAsYM(d.year,d.month,"sub")):i<=e&&e<o+i?(a=e-i,s.range||a+1===d.date&&t.addClass(b)):(a=e-o-i,t.addClass("laydate-day-next"),n=l.getAsYM(d.year,d.month)),n[1]++,n[2]=a+1,t.attr("lay-ymd",n.join("-")).html(n[2]),l.mark(t,n).limit(t,{year:n[0],month:n[1]-1,date:n[2]},e)}),S(h[0]).attr("lay-ym",d.year+"-"+(d.month+1)),S(h[1]).attr("lay-ym",d.year+"-"+(d.month+1)),"cn"===s.lang?(S(h[0]).attr("lay-type","year").html(d.year+"年"),S(h[1]).attr("lay-type","month").html(d.month+1+"月")):(S(h[0]).attr("lay-type","month").html(a.month[d.month]),S(h[1]).attr("lay-type","year").html(d.year)),c&&(s.range&&(e?l.endDate=l.endDate||{year:d.year+("year"===s.type?1:0),month:d.month+("month"===s.type?0:-1)}:l.startDate=l.startDate||{year:d.year,month:d.month},e&&(l.listYM=[[l.startDate.year,l.startDate.month+1],[l.endDate.year,l.endDate.month+1]],l.list(s.type,0).list(s.type,1),"time"===s.type?l.setBtnStatus("时间",S.extend({},l.systemDate(),l.startTime),S.extend({},l.systemDate(),l.endTime)):l.setBtnStatus(!0))),s.range||(l.listYM=[[d.year,d.month+1]],l.list(s.type,0))),s.range&&!e&&(t=l.getAsYM(d.year,d.month),l.calendar(S.extend({},d,{year:t[0],month:t[1]}))),s.range||l.limit(S(l.footer).find(M),null,0,["hours","minutes","seconds"]),s.range&&e&&!c&&l.stampRange(),l},s.prototype.list=function(n,a){var i,e,r,t,o,l,s=this,d=s.config,c=d.dateTime,u=s.lang(),m=d.range&&"date"!==d.type&&"datetime"!==d.type,h=S.elem("ul",{class:k+" "+{year:"laydate-year-list",month:"laydate-month-list",time:"laydate-time-list"}[n]}),f=s.elemHeader[a],y=S(f[2]).find("span"),p=s.elemCont[a||0],v=S(p).find("."+k)[0],g="cn"===d.lang,D=g?"年":"",x=s.listYM[a]||{},w=["hours","minutes","seconds"],C=["startTime","endTime"][a];return x[0]<1&&(x[0]=1),"year"===n?((e=i=x[0]-7)<1&&(e=i=1),S.each(new Array(15),function(e){var t=S.elem("li",{"lay-ym":i}),n={year:i};i==x[0]&&S(t).addClass(b),t.innerHTML=i+D,h.appendChild(t),i<s.firstDate.year?(n.month=d.min.month,n.date=d.min.date):i>=s.firstDate.year&&(n.month=d.max.month,n.date=d.max.date),s.limit(S(t),n,a),i++}),S(y[g?0:1]).attr("lay-ym",i-8+"-"+x[1]).html(e+D+" - "+(i-1)+D)):"month"===n?(S.each(new Array(12),function(e){var t=S.elem("li",{"lay-ym":e}),n={year:x[0],month:e};e+1==x[1]&&S(t).addClass(b),t.innerHTML=u.month[e]+(g?"月":""),h.appendChild(t),x[0]<s.firstDate.year?n.date=d.min.date:x[0]>=s.firstDate.year&&(n.date=d.max.date),s.limit(S(t),n,a)}),S(y[g?0:1]).attr("lay-ym",x[0]+"-"+x[1]).html(x[0]+D)):"time"===n&&(r=function(){S(h).find("ol").each(function(n,e){S(e).find("li").each(function(e,t){s.limit(S(t),[{hours:e},{hours:s[C].hours,minutes:e},{hours:s[C].hours,minutes:s[C].minutes,seconds:e}][n],a,[["hours"],["hours","minutes"],["hours","minutes","seconds"]][n])})}),d.range||s.limit(S(s.footer).find(M),s[C],0,["hours","minutes","seconds"])},d.range?s[C]||(s[C]={hours:0,minutes:0,seconds:0}):s[C]=c,S.each([24,60,60],function(t,e){var n=S.elem("li"),a=["<p>"+u.time[t]+"</p><ol>"];S.each(new Array(e),function(e){a.push("<li"+(s[C][w[t]]===e?' class="'+b+'"':"")+">"+S.digit(e,2)+"</li>")}),n.innerHTML=a.join("")+"</ol>",h.appendChild(n)}),r()),v&&p.removeChild(v),p.appendChild(h),"year"===n||"month"===n?(S(s.elemMain[a]).addClass("laydate-ym-show"),S(h).find("li").on("click",function(){var e,t=0|S(this).attr("lay-ym");S(this).hasClass(T)||(0===a?(c[n]=t,m&&(s.startDate[n]=t),s.limit(S(s.footer).find(M),null,0)):m?s.endDate[n]=t:(e="year"===n?s.getAsYM(t,x[1]-1,"sub"):s.getAsYM(x[0],t,"sub"),S.extend(c,{year:e[0],month:e[1]})),"year"===d.type||"month"===d.type?(S(h).find("."+b).removeClass(b),S(this).addClass(b),"month"===d.type&&"year"===n&&(s.listYM[a][0]=t,m&&(s[["startDate","endDate"][a]].year=t),s.list("month",a))):(s.checkDate("limit").calendar(),s.closeList()),s.setBtnStatus(),d.range||s.done(null,"change"),S(s.footer).find(_).removeClass(T))})):(t=S.elem("span",{class:E}),o=function(){S(h).find("ol").each(function(e){var n=this,t=S(n).find("li");n.scrollTop=30*(s[C][w[e]]-2),n.scrollTop<=0&&t.each(function(e,t){if(!S(this).hasClass(T))return n.scrollTop=30*(e-2),!0})})},l=S(f[2]).find("."+E),o(),t.innerHTML=d.range?[u.startTime,u.endTime][a]:u.timeTips,S(s.elemMain[a]).addClass("laydate-time-show"),l[0]&&l.remove(),f[2].appendChild(t),S(h).find("ol").each(function(t){var n=this;S(n).find("li").on("click",function(){var e=0|this.innerHTML;S(this).hasClass(T)||(d.range?s[C][w[t]]=e:c[w[t]]=e,S(n).find("."+b).removeClass(b),S(this).addClass(b),r(),o(),!s.endDate&&"time"!==d.type||s.done(null,"change"),s.setBtnStatus())})})),s},s.prototype.listYM=[],s.prototype.closeList=function(){var n=this;n.config;S.each(n.elemCont,function(e,t){S(this).find("."+k).remove(),S(n.elemMain[e]).removeClass("laydate-ym-show laydate-time-show")}),S(n.elem).find("."+E).remove()},s.prototype.setBtnStatus=function(e,t,n){var a,i=this,r=i.config,o=S(i.footer).find(M);r.range&&"date"!==r.type&&"time"!==r.type&&(t=t||i.startDate,n=n||i.endDate,a=i.newDate(t).getTime()>i.newDate(n).getTime(),i.limit(null,t)||i.limit(null,n)?o.addClass(T):o[a?"addClass":"removeClass"](T),e&&a&&i.hint("string"==typeof e?d.replace(/日期/g,e):d))},s.prototype.parse=function(e,t){var n=this,a=n.config,i=t||(e?S.extend({},n.endDate,n.endTime):a.range?S.extend({},n.startDate,n.startTime):a.dateTime),r=n.format.concat();return S.each(r,function(e,t){/yyyy|y/.test(t)?r[e]=S.digit(i.year,t.length):/MM|M/.test(t)?r[e]=S.digit(i.month+1,t.length):/dd|d/.test(t)?r[e]=S.digit(i.date,t.length):/HH|H/.test(t)?r[e]=S.digit(i.hours,t.length):/mm|m/.test(t)?r[e]=S.digit(i.minutes,t.length):/ss|s/.test(t)&&(r[e]=S.digit(i.seconds,t.length))}),a.range&&!e?r.join("")+" "+a.range+" "+n.parse(1):r.join("")},s.prototype.newDate=function(e){return e=e||{},new Date(e.year||1,e.month||0,e.date||1,e.hours||0,e.minutes||0,e.seconds||0)},s.prototype.setValue=function(e){var t=this.config,n=this.bindElem||t.elem[0],a=this.isInput(n)?"val":"html";return"static"===t.position||S(n)[a](e||""),this},s.prototype.stampRange=function(){var i,r,o=this,e=o.config,t=S(o.elem).find("td");if(e.range&&!o.endDate&&S(o.footer).find(M).addClass(T),o.endDate){if(i=o.newDate({year:o.startDate.year,month:o.startDate.month,date:o.startDate.date}).getTime(),(r=o.newDate({year:o.endDate.year,month:o.endDate.month,date:o.endDate.date}).getTime())<i)return o.hint(d);S.each(t,function(e,t){var n=S(t).attr("lay-ymd").split("-"),a=o.newDate({year:n[0],month:n[1]-1,date:n[2]}).getTime();S(t).removeClass(u+" "+b),a!==i&&a!==r||S(t).addClass(S(t).hasClass("fa-prev")||S(t).hasClass("fa-next")?u:b),i<a&&a<r&&S(t).addClass(u)})}},s.prototype.done=function(e,t){var n=this,a=n.config,i=S.extend({},n.startDate?S.extend(n.startDate,n.startTime):a.dateTime),r=S.extend({},S.extend(n.endDate,n.endTime));return S.each([i,r],function(e,t){"month"in t&&S.extend(t,{month:t.month+1})}),e=e||[n.parse(),i,r],"function"==typeof a[t||"done"]&&a[t||"done"].apply(a,e),n},s.prototype.choose=function(e){function t(e){new Date,e&&S.extend(r,l),i.range&&(a.startDate?S.extend(a.startDate,l):a.startDate=S.extend({},l,a.startTime),a.startYMD=l)}var n,a=this,i=a.config,r=i.dateTime,o=S(a.elem).find("td"),l={year:0|(l=e.attr("lay-ymd").split("-"))[0],month:(0|l[1])-1,date:0|l[2]};e.hasClass(T)||(i.range?(S.each(["startTime","endTime"],function(e,t){a[t]=a[t]||{hours:0,minutes:0,seconds:0}}),a.endState?(t(),delete a.endState,delete a.endDate,a.startState=!0,o.removeClass(b+" "+u),e.addClass(b)):a.startState?(e.addClass(b),a.endDate?S.extend(a.endDate,l):a.endDate=S.extend({},l,a.endTime),a.newDate(l).getTime()<a.newDate(a.startYMD).getTime()&&(n=S.extend({},a.endDate,{hours:a.startDate.hours,minutes:a.startDate.minutes,seconds:a.startDate.seconds}),S.extend(a.endDate,a.startDate,{hours:a.endDate.hours,minutes:a.endDate.minutes,seconds:a.endDate.seconds}),a.startDate=n),i.showBottom||a.done(),a.stampRange(),a.endState=!0,a.done(null,"change")):(e.addClass(b),t(),a.startState=!0),S(a.footer).find(M)[a.endDate?"removeClass":"addClass"](T)):"static"===i.position?(t(!0),a.calendar().done().done(null,"change")):"date"===i.type?(t(!0),a.setValue(a.parse()).remove().done()):"datetime"===i.type&&(t(!0),a.calendar().done(null,"change")))},s.prototype.tool=function(e,t){var n=this,a=n.config,i=a.dateTime,r="static"===a.position,o={datetime:function(){S(e).hasClass(T)||(n.list("time",0),a.range&&n.list("time",1),S(e).attr("lay-type","date").html(n.lang().dateTips))},date:function(){n.closeList(),S(e).attr("lay-type","datetime").html(n.lang().timeTips)},clear:function(){n.setValue("").remove(),r&&(S.extend(i,n.firstDate),n.calendar()),a.range&&(delete n.startState,delete n.endState,delete n.endDate,delete n.startTime,delete n.endTime),n.done(["",{},{}])},now:function(){var e=new Date;S.extend(i,n.systemDate(),{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}),n.setValue(n.parse()).remove(),r&&n.calendar(),n.done()},confirm:function(){if(a.range){if(!n.endDate)return n.hint("请先选择日期范围");if(S(e).hasClass(T))return n.hint("time"===a.type?d.replace(/日期/g,"时间"):d)}else if(S(e).hasClass(T))return n.hint("不在有效日期或时间范围内");n.done(),n.setValue(n.parse()).remove()}};o[t]&&o[t]()},s.prototype.change=function(i){function e(e){var t=["startDate","endDate"][i],n=S(d).find(".laydate-year-list")[0],a=S(d).find(".laydate-month-list")[0];return n&&(c[0]=e?c[0]-15:c[0]+15,r.list("year",i)),a&&(e?c[0]--:c[0]++,r.list("month",i)),(n||a)&&(S.extend(l,{year:c[0]}),s&&(r[t].year=c[0]),o.range||r.done(null,"change"),r.setBtnStatus(),o.range||r.limit(S(r.footer).find(M),{year:c[0]})),n||a}var r=this,o=r.config,l=o.dateTime,s=o.range&&("year"===o.type||"month"===o.type),d=r.elemCont[i||0],c=r.listYM[i];return{prevYear:function(){e("sub")||(l.year--,r.checkDate("limit").calendar(),o.range||r.done(null,"change"))},prevMonth:function(){var e=r.getAsYM(l.year,l.month,"sub");S.extend(l,{year:e[0],month:e[1]}),r.checkDate("limit").calendar(),o.range||r.done(null,"change")},nextMonth:function(){var e=r.getAsYM(l.year,l.month);S.extend(l,{year:e[0],month:e[1]}),r.checkDate("limit").calendar(),o.range||r.done(null,"change")},nextYear:function(){e()||(l.year++,r.checkDate("limit").calendar(),o.range||r.done(null,"change"))}}},s.prototype.changeEvent=function(){var r=this;r.config;S(r.elem).on("click",function(e){S.stope(e)}),S.each(r.elemHeader,function(i,e){S(e[0]).on("click",function(e){r.change(i).prevYear()}),S(e[1]).on("click",function(e){r.change(i).prevMonth()}),S(e[2]).find("span").on("click",function(e){var t=S(this),n=t.attr("lay-ym"),a=t.attr("lay-type");n&&(n=n.split("-"),r.listYM[i]=[0|n[0],0|n[1]],r.list(a,i),S(r.footer).find(_).addClass(T))}),S(e[3]).on("click",function(e){r.change(i).nextMonth()}),S(e[4]).on("click",function(e){r.change(i).nextYear()})}),S.each(r.table,function(e,t){S(t).find("td").on("click",function(){r.choose(S(this))})}),S(r.footer).find("span").on("click",function(){var e=S(this).attr("lay-type");r.tool(this,e)})},s.prototype.isInput=function(e){return/input|textarea/.test(e.tagName.toLocaleLowerCase())},s.prototype.events=function(){function e(e,t){e.on(a.trigger,function(){t&&(n.bindElem=this),n.render()})}var n=this,a=n.config;a.elem[0]&&!a.elem[0].eventHandler&&(e(a.elem,"bind"),e(a.eventElem),S(document).on("click",function(e){e.target!==a.elem[0]&&e.target!==a.eventElem[0]&&e.target!==S(a.closeStop)[0]&&n.remove()}).on("keydown",function(e){13===e.keyCode&&S("#"+n.elemID)[0]&&n.elemID===s.thisElem&&(e.preventDefault(),S(n.footer).find(M)[0].click())}),S(window).on("resize",function(){return!(!n.elem||!S(".layui-laydate")[0])&&void n.position()}),a.elem[0].eventHandler=!0)},f.render=function(e){var t=new s(e);return function(){var t=this;return{hint:function(e){t.hint.call(t,e)},config:t.config}}.call(t)},f.getEndDate=function(e,t){var n=new Date;return n.setFullYear(t||n.getFullYear(),e||n.getMonth()+1,1),new Date(n.getTime()-864e5).getDate()},window.lay=window.lay||S,n?(f.ready(),layui.define(function(e){f.path=layui.cache.dir,e("laydate",f)})):"function"==typeof define&&define.amd?define(function(){return f}):(f.ready(),window.laydate=f)}(),layui.define(["laydate","upload","admin"],function(e){function t(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:function(e){if(!e||isNaN(e))return"只能填写数字"},date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"]}}}var w=layui.$,o=layui.laydate,l=layui.upload,h=layui.layer,f=layui.admin,a=layui.hint(),y=layui.device(),C="form",p=".layui-form",b="layui-this",T="layui-hide",k="layui-disabled";t.prototype.set=function(e){return w.extend(!0,this.config,e),this},t.prototype.verify=function(e){return w.extend(!0,this.config.verify,e),this},t.prototype.on=function(e,t){return layui.onevent.call(this,C,e,t)},t.prototype.val=function(e,n){w(p+'[lay-filter="'+e+'"]').each(function(e,t){var i=w(this);layui.each(n,function(e,t){var n,a=i.find('[name="'+e+'"]');a[0]&&("checkbox"===(n=a[0].type)?a[0].checked=t:"radio"===n?a.each(function(){this.value===t&&(this.checked=!0)}):a.val(t))})}),v.render(null,e)},t.prototype.render=function(e,c){var d=this,n=w(p+(c?'[lay-filter="'+c+'"]':"")),t={select:function(){function f(e,t){w(e.target).parent().hasClass(g)&&!t||(w("."+v).removeClass(v+"ed "+v+"up"),y&&x&&y.val(x)),y=null}function h(a,e,t){var l,n,i,s,r,o=w(this),d=a.find("."+g),c=d.find("input"),u=a.find("dl"),m=u.children("dd"),h=this.selectedIndex;e||(n=function(){var e=a.offset().top+a.outerHeight()+5-M.scrollTop(),t=u.outerHeight();h=o[0].selectedIndex,a.addClass(v+"ed"),m.removeClass(T),l=null,m.eq(h).addClass(b).siblings().removeClass(b),e+t>M.height()&&t<=e&&a.addClass(v+"up"),s()},i=function(e){a.removeClass(v+"ed "+v+"up"),c.blur(),l=null,e||r(c.val(),function(e){var t=o[0].selectedIndex;e&&(x=w(o[0].options[t]).html(),0===t&&x===c.attr("placeholder")&&(x=""),c.val(x||""))})},s=function(){var e,t,n,a=u.children("dd."+b);a[0]&&(e=a.position().top,t=u.height(),n=a.height(),t<e&&u.scrollTop(e+u.scrollTop()-t+n-5),e<0&&u.scrollTop(e+u.scrollTop()-5))},d.on("click",function(e){a.hasClass(v+"ed")?i():(f(e,!0),n()),u.find("."+D).remove()}),d.find(".layui-edge").on("click",function(){c.focus()}),c.on("keyup",function(e){9===e.keyCode&&n()}).on("keydown",function(r){var e=r.keyCode;9===e&&i();function o(a,i){r.preventDefault();var e=function(){var e=u.children("dd."+b);if(u.children("dd."+T)[0]&&"next"===a){var t=u.children("dd:not(."+T+",."+k+")"),n=t.eq(0).index();if(0<=n&&n<e.index()&&!t.hasClass(b))return t.eq(0).prev()[0]?t.eq(0).prev():u.children(":last")}return i&&i[0]?i:l&&l[0]?l:e}(),t=e[a](),n=e[a]("dd:not(."+T+")");return t[0]?(l=e[a](),n[0]&&!n.hasClass(k)||!l[0]?(n.addClass(b).siblings().removeClass(b),void s()):o(a,l)):l=null}38===e&&o("prev"),40===e&&o("next"),13===e&&(r.preventDefault(),u.children("dd."+b).trigger("click"))}),r=function(a,e,i){var r=0;layui.each(m,function(){var e=w(this),t=e.text(),n=-1===t.indexOf(a);(""===a||"blur"===i?a!==t:n)&&r++,"keyup"===i&&e[n?"addClass":"removeClass"](T)});var t=r===m.length;return e(t),t},t&&c.on("keyup",function(e){var t=this.value,n=e.keyCode;if(9===n||13===n||37===n||38===n||39===n||40===n)return!1;r(t,function(e){e?u.find("."+D)[0]||u.append('<p class="'+D+'">无匹配项</p>'):u.find("."+D).remove()},"keyup"),""===t&&u.find("."+D).remove(),s()}).on("blur",function(e){var t=o[0].selectedIndex;y=c,x=w(o[0].options[t]).html(),0===t&&x===c.attr("placeholder")&&(x=""),setTimeout(function(){r(c.val(),function(e){x||c.val("")},"blur")},200)}),m.on("click",function(){var e=w(this),t=e.attr("lay-value"),n=o.attr("lay-filter");return e.hasClass(k)||(e.hasClass("layui-select-tips")?c.val(""):(c.val(e.text()),e.addClass(b)),e.siblings().removeClass(b),o.val(t).removeClass("layui-form-danger"),layui.event.call(this,C,"select("+n+")",{elem:o[0],value:t,othis:a}),i(!0)),!1}),a.find("dl>dt").on("click",function(e){return!1}),w(document).off("click",f).on("click",f))}var y,p="请选择",v="layui-form-select",g="layui-select-title",D="layui-select-none",x="",e=n.find("select");e.each(function(e,t){var n=w(this),a=n.next("."+v),i=this.disabled,r=t.value,o=w(t.options[t.selectedIndex]),l=t.options[0];if("string"==typeof n.attr("lay-ignore"))return n.show();var s,d,c="string"==typeof n.attr("lay-search"),u=l&&!l.value&&l.innerHTML||p,m=w(['<div class="'+(c?"":"layui-unselect ")+v,(i?" layui-select-disabled":"")+'">','<div class="'+g+'">','<input type="text" placeholder="'+u+'" value="'+(r?o.html():"")+'"'+(c?"":" readonly")+' class="layui-input'+(c?"":" layui-unselect")+(i?" "+k:"")+'">','<i class="layui-edge"></i></div>','<dl class="fa'+(n.find("optgroup")[0]?" layui-select-group":"")+'">',(s=n.find("*"),d=[],layui.each(s,function(e,t){0!==e||t.value?"optgroup"===t.tagName.toLowerCase()?d.push("<dt>"+t.label+"</dt>"):d.push('<dd lay-value="'+t.value+'" class="'+(r===t.value?b:"")+(t.disabled?" "+k:"")+'">'+t.innerHTML+"</dd>"):d.push('<dd lay-value="" class="layui-select-tips">'+(t.innerHTML||p)+"</dd>")}),0===d.length&&d.push('<dd lay-value="" class="'+k+'">没有选项</dd>'),d.join("")+"</dl>"),"</div>"].join(""));a[0]&&a.remove(),n.after(m),h.call(this,m,i,c)})},checkbox:function(){var c={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},e=n.find("input[type=checkbox]");e.each(function(e,t){var n=w(this),a=n.attr("lay-skin"),i=(n.attr("lay-text")||"").split("|"),r=this.disabled;"switch"===a&&(a="_"+a);var o=c[a]||c.checkbox;if("string"==typeof n.attr("lay-ignore"))return n.show();var l,s=n.next("."+o[0]),d=w(['<div class="layui-unselect '+o[0],t.checked?" "+o[1]:"",r?" layui-checkbox-disbaled "+k:"",'"',a?' lay-skin="'+a+'"':"",">",(l={checkbox:[t.title.replace(/\s/g,"")?"<span>"+t.title+"</span>":"",'<i class="fa fa-check"></i>'].join(""),_switch:"<em>"+((t.checked?i[0]:i[1])||"")+"</em><i></i>"})[a]||l.checkbox,"</div>"].join(""));s[0]&&s.remove(),n.after(d),function(n,a){var i=w(this);n.on("click",function(){var e=i.attr("lay-filter"),t=(i.attr("lay-text")||"").split("|");i[0].disabled||(i[0].checked?(i[0].checked=!1,n.removeClass(a[1]).find("em").text(t[1])):(i[0].checked=!0,n.addClass(a[1]).find("em").text(t[0])),layui.event.call(i[0],C,a[2]+"("+e+")",{elem:i[0],value:i[0].value,othis:n}))})}.call(this,d,o)})},radio:function(){var s="layui-form-radio",e=n.find("input[type=radio]");e.each(function(e,t){var n=w(this),a=n.next("."+s),i=this.disabled;if("string"==typeof n.attr("lay-ignore"))return n.show();a[0]&&a.remove();var r,o=w(['<div class="layui-unselect '+s,t.checked?" "+s+"ed":"",(i?" layui-radio-disbaled "+k:"")+'">','<i class="fa '+(t.checked?"fa-dot-circle-o":"fa-circle-o")+'"></i>',"<div>"+(r=t.title||"","string"==typeof n.next().attr("lay-radio")&&(r=n.next().html(),n.next().remove()),r)+"</div>","</div>"].join(""));n.after(o),function(i){var r=w(this),o="fa-circle-o",l="fa-dot-circle-o";i.on("click",function(){var e=r[0].name,t=r.parents(p),n=r.attr("lay-filter"),a=t.find("input[name="+e.replace(/(\.|#|\[|\])/g,"\\$1")+"]");r[0].disabled||(layui.each(a,function(){var e=w(this).next("."+s);this.checked=!1,e.removeClass(s+"ed"),e.find(".fa").removeClass(l).addClass(o)}),r[0].checked=!0,i.addClass(s+"ed"),i.find(".fa").addClass(l).removeClass(o),layui.event.call(r[0],C,"radio("+n+")",{elem:r[0],value:r[0].value,othis:i}))})}.call(this,o)})},img:function(){function o(e,t){var n=t.parents("."+s),a=t.find(".uploader__files"),i=t.find(".img__picker"),r=n.find("input[type=hidden]"),o=i.data("limit");if(c=n.attr("lay-filter"),1==o&&void 0!==e[0]&&0<e[0].length)a.append(d.replace(new RegExp(/(UPLOADEDFILE)/g),e[0])),r.val(e[0]),i.hide();else{var l=r.val();if((l=void 0!==l&&1<l.length?l.split(","):[]).length>=o)return;w.each(e,function(e,t){l.push(t),l.length>=o&&i.hide(),a.append(d.replace(new RegExp(/(UPLOADEDFILE)/g),t))}),r.val(l.join(","))}a.on("mouseenter",".uploader__file",function(){w(this).find(".uploader__mask").show()}).on("mouseleave",".uploader__file",function(){w(this).find(".uploader__mask").hide()}),a.on("click",".j_delete",function(){var e,t,n;1==o?(a.remove(),i.show(),r.val("")):(w(this).parents(".uploader__file").remove(),e=w(this).attr("data-id"),-1<(n=(t=1<(t=r.val()).length?t.split(","):[]).indexOf(e))&&t.splice(n,1),i.show(),r.val(t))}),layui.event.call(e[0],C,"img("+c+")",{elem:e[0],value:r.val(),othis:t})}var s="layui-form-img",e=n.find("."+s),d='<li class="uploader__file" style="background-image: url(UPLOADEDFILE)"><div class="uploader__mask" style="display: none"><div class="mask__delete"><a href="javascript:;" class="j_delete" data-id="UPLOADEDFILE"><i class="fa fa-close"></i></a></div></div></li>';e.each(function(e,t){var n=w(this),a=n.find("input[type=hidden]").val(),i=n.data("limit")||1,r=w(['<div class="m-uploader clearfix">','<ul class="uploader__files"></ul>','<div class="img__picker" data-limit="'+i+'" ></div>',"</div>"].join(""));0<n.find(".m-uploader").length||(n.append(r),o(void 0!==a&&0<a.length?a.split(","):[],r),function(t){var e=w(this),n=t.find(".img__picker"),a=e.data("limit");n.on("click",function(){l.render({url:"/interface/core/upload",fileNumLimit:a,done:function(e){o(e,t)}})})}.call(this,r))})},date:function(){n.find(".layui-form-date").each(function(e,t){o.render({elem:t,type:w(t).attr("date-type")||"date"})}),n.find(".layui-form-daterange").each(function(e,t){var n=w(this),a="",i="",r=n.data("options"),a=o.render({elem:n.find(".start_at")[0],min:r.min||"1900-1-1",max:r.max||"2999-12-31",type:r.type||"date",value:n.find(".start_at")[0].value,done:function(e,t){i.config.min=lay.extend({},t,{month:t.month-1})}}),i=o.render({elem:n.find(".end_at")[0],min:r.min||"1900-1-1",max:r.max||"2999-12-31",type:r.type||"date",value:n.find(".end_at")[0].value,done:function(e,t){a.config.max=lay.extend({},t,{month:t.month-1})}})})},region:function(){var t="layui-region",l=function(a,e){var i=a.data("id"),r=a.parents("."+t).data("mode")||"id",o=!1;w.each(e,function(e,t){!1===o&&!1===o&&(o=0<i&&i===t.id);var n='<option value="'+("id"==r?t.id:t.label)+'">'+t.label+"</option>";a.append(n)}),o&&a.val(i),d.render("select")},s=function(e){e.find("option").remove()};n.find("."+t).each(function(e,t){var n=w(t),i=w.parseJSON(n.find("input[name=_data]").val()),a=n.find("[data-province]"),r=n.find("[data-city]"),o=n.find("[data-region]");d.on("select(province)",function(e){var t=Number(e.value),n=[{id:"",label:""}];0<t&&(s(r),s(o),r.data("provinceId",t),n=n.concat(_.find(i,{id:t}).children),l(r,n),r.parent("div").show(),o.parent("div").hide())}),d.on("select(city)",function(e){w(this);var t,n=r.data("provinceId"),a=Number(e.value);0<a&&(s(o),o.data("cityId",a),t=_.find(i,{id:n}).children,l(o,_.find(t,{id:a}).children),o.parent("div").show())}),l(a,i)})}};return e?t[e]?t[e]():a.error("不支持的"+e+"表单渲染"):layui.each(t,function(e,t){t()}),d};function n(){var e=w(this),d=v.config.verify,c=null,u="layui-form-danger",a={},t=e.parents(p),n=t.find("*[lay-verify]"),i=e.parents("form")[0],r=t.find("input,select,textarea"),o=e.attr("lay-filter"),l=e.hasClass("J_ajax");if(layui.each(n,function(e,r){var o=w(this),t=o.attr("lay-verify").split("|"),l=o.attr("lay-verType"),s=o.val();if(o.removeClass(u),layui.each(t,function(e,t){var n="",a="function"==typeof d[t];if(d[t]){var i=a?n=d[t](s,r):!d[t][0].test(s),n=n||d[t][1];if(i)return"tips"===l?h.tips(n,"string"==typeof o.attr("lay-ignore")||"select"!==r.tagName.toLowerCase()&&!/^checkbox|radio$/.test(r.type)?o:o.next(),{tips:1}):"alert"===l?h.alert(n,{title:"提示",shadeClose:!0}):h.msg(n,{icon:5,shift:6}),y.android||y.ios||r.focus(),o.addClass(u),c=!0}}),c)return c}),c)return!1;var s={};layui.each(r,function(e,t){var n;t.name=(t.name||"").replace(/^\s*|\s*&/,""),t.name&&(/^.*\[\]$/.test(t.name)&&(n=t.name.match(/^(.*)\[\]$/g)[0],s[n]=0|s[n],t.name=t.name.replace(/^(.*)\[\]$/,"$1["+s[n]+++"]")),/^checkbox|radio$/.test(t.type)&&!t.checked||(a[t.name]=t.value))});var m=e.parents("form");return l?(f.request.ajax({type:m.attr("method"),url:m.attr("action"),data:a,success:function(e){if(0==e.errcode){if(h.msg(e.msg),e.data.hasOwnProperty("redirect"))return void setTimeout(function(){f.openTab(e.data.redirect,"列表")},1500);parent.layer&&window.name&&setTimeout(function(){parent.layer.close(parent.layer.getFrameIndex(window.name))},1500),m[0].reset()}else h.alert(e.msg,{title:"提示",shadeClose:!0});return layui.event.call(this,C,"submit("+o+")",{elem:this,form:i,field:a})}}),!1):layui.event.call(this,C,"submit("+o+")",{elem:this,form:i,field:a})}var v=new t,i=w("body"),M=w(window);v.render(),i.on("reset",p,function(){var e=w(this).attr("lay-filter");setTimeout(function(){v.render(null,e)},50)}),i.on("submit",p,n).on("click","*[lay-submit]",n),i.on("click","*[lay-submit-cancel]",function(){parent.layer.close(parent.layer.getFrameIndex(window.name))}),e(C,v)});