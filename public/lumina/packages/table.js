"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}layui.define(function(e){function t(e){var t=this;t.config=e||{},t.config.index=++h.index,t.render(!0)}var o=document,r="getElementById",u="getElementsByTagName",d="layui-disabled";t.prototype.type=function(){var e=this.config;if("object"===_typeof(e.elem))return void 0===e.elem.length?2:3},t.prototype.view=function(){var n=this.config,o=n.groups="groups"in n?0|n.groups:5;n.layout="object"===_typeof(n.layout)?n.layout:["prev","page","next"],n.count=0|n.count,n.curr=0|n.curr||1,n.limits="object"===_typeof(n.limits)?n.limits:[10,20,30,40,50],n.limit=0|n.limit||10,n.pages=Math.ceil(n.count/n.limit)||1,n.curr>n.pages&&(n.curr=n.pages),o<0?o=1:o>n.pages&&(o=n.pages),n.prev="prev"in n?n.prev:"&#x4E0A;&#x4E00;&#x9875;",n.next="next"in n?n.next:"&#x4E0B;&#x4E00;&#x9875;";var a,i,r=n.pages>o?Math.ceil((n.curr+(1<o?1:0))/(0<o?o:1)):1,l={prev:n.prev?'<a href="javascript:;" class="layui-laypage-prev'+(1==n.curr?" "+d:"")+'" data-page="'+(n.curr-1)+'">'+n.prev+"</a>":"",page:function(){var e=[];if(n.count<1)return"";1<r&&!1!==n.first&&0!==o&&e.push('<a href="javascript:;" class="layui-laypage-first" data-page="1"  title="&#x9996;&#x9875;">'+(n.first||1)+"</a>");var t,a=Math.floor((o-1)/2),i=1<r?n.curr-a:1,l=1<r?(t=n.curr+(o-a-1))>n.pages?n.pages:t:o;for(l-i<o-1&&(i=l-o+1),!1!==n.first&&2<i&&e.push('<span class="layui-laypage-spr">&#x2026;</span>');i<=l;i++)i===n.curr?e.push('<span class="layui-laypage-curr"><em class="layui-laypage-em" '+(/^#/.test(n.theme)?'style="background-color:'+n.theme+';"':"")+"></em><em>"+i+"</em></span>"):e.push('<a href="javascript:;" data-page="'+i+'">'+i+"</a>");return n.pages>o&&n.pages>l&&!1!==n.last&&(l+1<n.pages&&e.push('<span class="layui-laypage-spr">&#x2026;</span>'),0!==o&&e.push('<a href="javascript:;" class="layui-laypage-last" title="&#x5C3E;&#x9875;"  data-page="'+n.pages+'">'+(n.last||n.pages)+"</a>")),e.join("")}(),next:n.next?'<a href="javascript:;" class="layui-laypage-next'+(n.curr==n.pages?" "+d:"")+'" data-page="'+(n.curr+1)+'">'+n.next+"</a>":"",count:'<span class="layui-laypage-count">共 '+n.count+" 条</span>",limit:(a=['<span class="layui-laypage-limits"><select lay-ignore>'],layui.each(n.limits,function(e,t){a.push('<option value="'+t+'"'+(t===n.limit?"selected":"")+">"+t+" 条/页</option>")}),a.join("")+"</select></span>"),refresh:['<a href="javascript:;" data-page="'+n.curr+'" class="layui-laypage-refresh">','<i class="fa fa-refresh"></i>',"</a>"].join(""),skip:['<span class="layui-laypage-skip">&#x5230;&#x7B2C;','<input type="text" min="1" value="'+n.curr+'" class="layui-input">','&#x9875;<button type="button" class="layui-laypage-btn">&#x786e;&#x5b9a;</button>',"</span>"].join("")};return['<div class="layui-box layui-laypage layui-laypage-'+(n.theme?/^#/.test(n.theme)?"molv":n.theme:"default")+'" id="layui-laypage-'+n.index+'">',(i=[],layui.each(n.layout,function(e,t){l[t]&&i.push(l[t])}),i.join("")),"</div>"].join("")},t.prototype.jump=function(e,t){if(e){var a=this,i=a.config,l=e.children,n=e[u]("button")[0],o=e[u]("input")[0],r=e[u]("select")[0],d=function(){var e=0|o.value.replace(/\s|\D/g,"");e&&(i.curr=e,a.render())};if(t)return d();for(var s=0,c=l.length;s<c;s++)"a"===l[s].nodeName.toLowerCase()&&h.on(l[s],"click",function(){var e=0|this.getAttribute("data-page");e<1||e>i.pages||(i.curr=e,a.render())});r&&h.on(r,"change",function(){var e=this.value;i.curr*e>i.count&&(i.curr=Math.ceil(i.count/e)),i.limit=e,a.render()}),n&&h.on(n,"click",function(){d()})}},t.prototype.skip=function(i){var l,e;i&&(l=this,(e=i[u]("input")[0])&&h.on(e,"keyup",function(e){var t=this.value,a=e.keyCode;/^(37|38|39|40)$/.test(a)||(/\D/.test(t)&&(this.value=t.replace(/\D/,"")),13===a&&l.jump(i,!0))}))},t.prototype.render=function(e){var t=this,a=t.config,i=t.type(),l=t.view();2===i?a.elem&&(a.elem.innerHTML=l):3===i?a.elem.html(l):o[r](a.elem)&&(o[r](a.elem).innerHTML=l),a.jump&&a.jump(a,e);var n=o[r]("layui-laypage-"+a.index);t.jump(n),a.hash&&!e&&(location.hash="!"+a.hash+"="+a.curr),t.skip(n)};var h={render:function(e){return new t(e).index},index:layui.laypage?layui.laypage.index+1e4:0,on:function(t,e,a){return t.attachEvent?t.attachEvent("on"+e,function(e){e.target=e.srcElement,a.call(t,e)}):t.addEventListener(e,a,!1),this}};e("laypage",h)}),layui.define(["admin","laytpl","laypage","form","dropdown"],function(e){function r(){var t=this,e=t.config,a=e.id||e.index;return a&&(r.that[a]=t,r.config[a]=e),{reload:function(e){t.reload.call(t,e)},setColsWidth:function(){t.setColsWidth.call(t)},resize:function(){t.resize.call(t)},config:e}}function i(e){var t=r.config[e];return t||f.error("The ID option was not found in the table instance"),t||null}function t(e){return['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',(e=e||{}).fixed&&"right"!==e.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===e.fixed?'{{# if(item2.fixed === "right"){ }}':"","{{# var isSort = !(item2.colGroup) && item2.sort; }}",'<th data-field="{{ item2.field||i2 }}" data-key="{{d.index}}-{{i1}}-{{i2}}" {{# if( item2.parentKey){ }}data-parentkey="{{ item2.parentKey }}"{{# } }} {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} {{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}} {{# if(item2.unresize || item2.colGroup){ }}data-unresize="true"{{# } }} class="{{# if(item2.hide){ }}layui-hide{{# } }}{{# if(isSort){ }} layui-unselect{{# } }}{{# if(!item2.field){ }} layui-table-col-special{{# } }}">','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colGroup){ }}","group","{{# } else { }}","{{d.index}}-{{i1}}-{{i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(isSort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge fa-sort-asc" title="升序"></i><i class="layui-edge fa-sort-desc" title="降序"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",e.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")}function a(e){var t=this;M="",t.index=++w.index,e.treeMode&&(e.tree=b.extend({},t.config.tree,e.tree),e=b.extend({page:!1},e)),t.config=b.extend({},t.config,w.config,e),t.render()}var b=layui.$,x=layui.laytpl,s=layui.laypage,h=layui.layer,p=layui.form,y=layui.dropdown,f=layui.hint(),m=layui.admin,v=layui.device(),l=!1,g=null,k=null,w={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(e){return this.config=b.extend({},this.config,e),this},on:function(e,t){return layui.onevent.call(this,C,e,t)}},C="table",T="layui-hide",c="layui-none",o="layui-table-view",d=".layui-table-header",_=".layui-table-body",j=".layui-table-sort",S="layui-table-edit",E="layui-table-hover",n=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),u=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" lay-id="{{ d.data.id }}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool">','<div class="layui-table-tool-temp"></div>','<div class="layui-table-tool-self"></div>',"</div>","{{# } }}",'<div class="layui-table-box">',"{{# if(d.data.loading){ }}",'<div class="layui-table-init" style="background-color: #fff;">','<i class="fa fa-spin fa-spinner"></i>',"</div>","{{# } }}","{{# var left, right; }}",'<div class="layui-table-header">',t(),"</div>",'<div class="layui-table-body layui-table-main">',n,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',t({fixed:!0}),"</div>",'<div class="layui-table-body">',n,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',t({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',n,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.totalRow){ }}",'<div class="layui-table-total">','<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>','<tbody><tr><td><div class="layui-table-cell" style="visibility: hidden;">Total</div></td></tr></tbody>',"</table>","</div>","{{# } }}","{{# if(d.data.page){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{i1}}-{{i2}}{ ","{{# if(item2.width){ }}","width: {{item2.width}}px;","{{# } }}"," }","{{# });","}); }}","</style>","</div>"].join(""),L=b(window),A=b(document),M="";a.prototype.config={limit:15,loading:!0,cellMinWidth:80,defaultToolbar:["filter","exports"],action:null,autoSort:!1,canSearch:!0,autoShow:null,autoShowWidth:"800px",autoShowWidthMobile:"300px",toolbar:"default",searchFields:null,lineHeight:null,height:"full-110",treeMode:!1,tree:{top_value:0,primary_field:"id",parent_field:"parentid",icon_field:"name",is_checkbox:!0,icon_close:"fa-caret-right",icon_open:"fa-caret-down"},page:!0,hasRefresh:!0,export:{url:null,can:!1,all:!1},text:{none:"无数据"}},a.prototype.render=function(){var e=this,t=e.config;if(t.elem=b(t.elem),t.where=t.where||{},t.id=t.id||t.elem.attr("id")||e.index,t.elem.addClass("loading"),t.request=b.extend({pageName:"page",limitName:"limit"},t.request),t.response=b.extend({statusName:"errcode",statusCode:0,msgName:"msg",dataName:"data",countName:"total"},t.response),"object"===_typeof(t.page)&&(t.limit=t.page.limit||t.limit,t.limits=t.page.limits||t.limits,e.page=t.page.curr=t.page.curr||1,delete t.page.elem,delete t.page.jump),!t.elem[0])return e;t.height&&/^full-\d+$/.test(t.height)&&(e.fullHeightGap=t.height.split("-")[1],t.height=L.height()-e.fullHeightGap),e.setInit();var a,i=t.elem,l=i.next("."+o),n=e.elem=b(x(u).render({VIEW_CLASS:o,data:t,index:e.index}));t.index=e.index,l[0]&&l.remove(),i.after(n),e.layTool=n.find(".layui-table-tool"),e.layBox=n.find(".layui-table-box"),e.layHeader=n.find(d),e.layMain=n.find(".layui-table-main"),e.layBody=n.find(_),e.layFixed=n.find(".layui-table-fixed"),e.layFixLeft=n.find(".layui-table-fixed-l"),e.layFixRight=n.find(".layui-table-fixed-r"),e.layTotal=n.find(".layui-table-total"),e.layPage=n.find(".layui-table-page"),e.renderToolbar(),e.renderFilter(),e.fullSize(),1<t.cols.length&&(a=e.layFixed.find(d).find("th")).height(e.layHeader.height()-1-parseFloat(a.css("padding-top"))-parseFloat(a.css("padding-bottom"))),e.pullData(e.page),e.events()},a.prototype.initOpts=function(e){var t=this.config;e.checkbox&&(e.type="checkbox"),e.space&&(e.type="space"),e.type||(e.type="normal"),"normal"!==e.type&&(e.unresize=!0,e.width=e.width||{checkbox:48,radio:48,space:15,numbers:40}[e.type]),t.autoShow&&!l&&(l=!0,t.cols[0].push({title:"#",toolbar:"<div><a class='px-1 cursor-pointer' lay-event='show'><i class='fa fa-eye'></i></a></div>",fixed:"right",width:50,downoff:!0}))},a.prototype.setInit=function(e){var t=this,o=t.config;if(o.clientWidth=o.width||function e(t){var a,i=(t=t||o.elem.parent()).width();try{a="none"===t.css("display")}catch(e){}return!t[0]||i&&!a?i:e(t.parent())}(),"width"===e)return o.clientWidth;layui.each(o.cols,function(n,e){layui.each(e,function(a,i){var l;i?(i.key=n+"-"+a,i.hide=i.hide||!1,(i.colGroup||1<i.colspan)&&(l=0,layui.each(o.cols[n+1],function(e,t){t.HAS_PARENT||1<l&&l==i.colspan||(t.HAS_PARENT=!0,t.parentKey=n+"-"+a,l+=parseInt(1<t.colspan?t.colspan:1))}),i.colGroup=!0),t.initOpts(i)):e.splice(a,1)})})},a.prototype.renderFilter=function(){var e,a,l=this,t=l.config,n=['<div class="layui-inline filterbox pull-right cursor-pointer">','<div class="layui-btn-dropdown" data-toggle="dropdown">','<i class="fa fa-filter" title="筛选"></i>','<ul class="layui-dropdown-menu" data-name="{{ d.name }}">{{ d.actionItems }}</ul>',"</div></div></div>"].join("");g&&(e=l.layTool.find(".layui-table-tool-temp"),a="",b.each(k,function(e,t){a+='<span lay-event="clearFilter" data-name="'+e+'" class="layui-badge-rim mr-2 border-red-600">'+t.label+"："+t.val+'<i class="fa fa-trash text-error ml-1"></i></span>'}),e.append(['<div class="layui-inline filterbox pull-right cursor-pointer">',a,"<div>"].join(""))),t.filters&&(b.each(t.filters,function(e,t){var a=l.layHeader.find("th[data-field="+t.name+"]"),i="";b.each(t.options,function(e,t){i+='<li><a lay-event="'+e+'">'+t+"</a></li>"}),a.find(".layui-table-cell").append(x(n).render({actionItems:i,name:t.name}))}),y.render())},a.prototype.renderToolbar=function(){var e,a,t,i=this,l=i.config,n={create:{title:"新增",layEvent:"create",icon:"fa-plus"},update:{title:"更新",layEvent:"update",icon:"fa-edit"},delete:{title:"删除",layEvent:"delete",icon:"fa-trash"}},o=['<div class="layui-inline tool px-3 py-1 mr-2" lay-event="LAYTABLE_REFRESH"><i class="fa fa-refresh"></i></div>'],r=i.layTool.find(".layui-table-tool-temp");"default"===l.toolbar?(layui.each(n,function(e,t){o.push('<div class="layui-inline tool px-3 py-1" title="'+t.title+'" lay-event="'+t.layEvent+'"><i class="fa '+t.icon+'"></i></div>')}),r.html(o.join(""))):"object"===_typeof(l.toolbar)?(layui.each(l.toolbar,function(e,t){var a=n[t];a&&o.push('<div class="layui-inline tool px-3 py-1" title="'+a.title+'" lay-event="'+a.layEvent+'"><i class="fa '+a.icon+'"></i></div>')}),r.html(o.join(""))):"string"!=typeof l.toolbar||(e=b(l.toolbar).html()||"")&&r.html(x(e).render(l)),l.action&&(t=['<div class="layui-inline tool ml-2 px-3 py-1" data-toggle="dropdown"><div class="layui-btn-dropdown">','<i class="fa fa-ellipsis-v px-2"></i>','<ul class="layui-dropdown-menu">{{ d.actionItems }}</ul>',"</div></div></div>"].join(a=""),b.each(l.action,function(e,t){a+='<li><a lay-event="'+t.event+'">'+t.text+"</a></li>"}),r.append(x(t).render({actionItems:a})),y.render());var d,s,c,u={filter:{title:"筛选列",layEvent:"LAYTABLE_COLS",icon:"fa-list-ul"},exports:{title:"导出",layEvent:"LAYTABLE_EXPORT",icon:"fa-download"}},h=[];"object"===_typeof(l.defaultToolbar)&&layui.each(l.defaultToolbar,function(e,t){var a=u[t];a&&("exports"!==t||l.export.can)&&h.push('<div class="layui-inline tool px-3 py-1" title="'+a.title+'" lay-event="'+a.layEvent+'"><i class="fa '+a.icon+'"></i></div>')}),i.layTool.find(".layui-table-tool-self").html(h.join("")),l.canSearch&&(d='<div class="layui-table-tool-search"><form class="layui-form"><input type="text" name="wd" value="'+(l.where.search||"")+'"><button lay-submit lay-filter="*" data-table="'+l.id+'" class="fa fa-search"></button></form></div>',i.layTool.prepend(d),i.layTool.find(".layui-table-tool-temp").css("marginLeft","265px"),l.where.search?(c=(s=i.layTool.find(".layui-table-tool-search input[name=wd]")).val(),s.val("").focus().val(c),i.layTool.find("form").append('<button class="j_cancel fa fa-close mr-6" lay-submit lay-filter="*" data-table="'+l.id+'" data-type="cancel"></button>')):i.layTool.find("form .j_cancel").remove())},a.prototype.setParentCol=function(e,t){var a,i,l,n=this.config,o=this.layHeader.find('th[data-key="'+n.index+"-"+t+'"]'),r=parseInt(o.attr("colspan"))||0;o[0]&&(a=t.split("-"),i=n.cols[a[0]][a[1]],e?r--:r++,o.attr("colspan",r),o[r<1?"addClass":"removeClass"](T),i.colspan=r,i.hide=r<1,(l=o.data("parentkey"))&&this.setParentCol(e,l))},a.prototype.setColsPatch=function(){var a=this,e=a.config;layui.each(e.cols,function(e,t){layui.each(t,function(e,t){t.hide&&a.setParentCol(t.hide,t.parentKey)})})},a.prototype.setColsWidth=function(){var i=this,o=i.config,a=0,r=0,d=0,s=0,c=i.setInit("width");i.eachCols(function(e,t){t.hide||a++}),c=c-("line"===o.skin||"nob"===o.skin?2:a+1)-i.getScrollWidth(i.layMain[0])-1;function e(n){layui.each(o.cols,function(e,l){layui.each(l,function(e,t){var a=0,i=t.minWidth||o.cellMinWidth;t?t.colGroup||t.hide||(n?d&&d<i&&(r--,a=i):(a=t.width||0,/\d+%$/.test(a)?(a=Math.floor(parseFloat(a)/100*c))<i&&(a=i):a||(t.width=a=0,r++)),t.hide&&(a=0),s+=a):l.splice(e,1)})}),s<c&&r&&(d=(c-s)/r)}e(),e(!0),i.autoColNums=r,i.eachCols(function(e,t){var a=t.minWidth||o.cellMinWidth;t.colGroup||t.hide||(0===t.width?i.getCssRule(o.index+"-"+t.key,function(e){e.style.width=Math.floor(a<=d?d:a)+"px"}):/\d+%$/.test(t.width)&&i.getCssRule(o.index+"-"+t.key,function(e){e.style.width=Math.floor(parseFloat(t.width)/100*c)+"px"}))});var l,t,n=i.layMain.width()-i.getScrollWidth(i.layMain[0])-i.layMain.children("table").outerWidth();i.autoColNums&&-a<=n&&n<=a&&(t=(l=function e(t){return!(t=t||i.layHeader.eq(0).find("thead th:last-child")).data("field")&&t.prev()[0]?e(t.prev()):t}()).data("key"),i.getCssRule(t,function(e){var t=e.style.width||l.outerWidth();e.style.width=parseFloat(t)+n+"px",0<i.layMain.height()-i.layMain.prop("clientHeight")&&(e.style.width=parseFloat(e.style.width)-1+"px")})),i.loading(!0)},a.prototype.resize=function(){this.fullSize(),this.setColsWidth(),this.scrollPatch()},a.prototype.reload=function(e){var t=this;t.config.data&&t.config.data.constructor===Array&&delete t.config.data,t.config=b.extend({},t.config,e),t.render()},a.prototype.page=1,a.prototype.pullData=function(t){var e,a,i,l,n=this,o=n.config,r=o.request,d=o.response;n.startTime=(new Date).getTime(),o.url?((e={})[r.pageName]=t,e[r.limitName]=o.limit,a=b.extend(e,o.where),o.contentType&&0==o.contentType.indexOf("application/json")&&(a=JSON.stringify(a)),m.request.ajax({type:o.method||"get",url:o.url,contentType:o.contentType,data:a,dataType:"json",headers:o.headers||{},success:function(e){o.treeMode&&(e=n.parseTreeData(e)),"function"==typeof o.parseData&&(e=o.parseData(e)||e),e[d.statusName]!=d.statusCode?(n.renderForm(),n.layMain.html('<div class="'+c+'">'+(e[d.msgName]||"返回的数据不符合规范，正确的成功状态码 ("+d.statusName+") 应为："+d.statusCode)+"</div>")):(n.renderData(e,t,e.meta?e.meta[d.countName]:e.data.length),o.time=(new Date).getTime()-n.startTime+" ms"),n.setColsWidth(),n.renderDone(e,t,e[d.countName])},error:function(e,t){n.layMain.html('<div class="'+c+'">数据接口请求异常：'+t+"</div>"),n.renderForm(),n.setColsWidth()}})):o.data&&o.data.constructor===Array&&(i={},l=t*o.limit-o.limit,i[d.dataName]=o.data.concat().splice(l,o.limit),i[d.countName]=o.data.length,n.renderData(i,t,o.data.length),n.setColsWidth(),n.renderDone(i,t,i[d.countName]))},a.prototype.renderDone=function(e,t,a){var i,l=this.config;!l.where.orderBy||0<(i=this.layHeader.find("[data-field="+l.where.orderBy+"]").find(".layui-table-sort")).length&&i.attr("lay-sort",l.where.sortedBy),"function"==typeof l.done&&l.done(e,t,a)},a.prototype.parseTreeData=function(e){var a,i,l,t=this.config,r=jQuery,n=t.tree,o=function a(i,l,n,o){return l[n]&&(o.push(l[n]),delete l[n]),r.each(i.data,function(e,t){t[i.parent_field]==n&&o.concat(a(i,l,t[i.primary_field],o))}),o};return n.data=e.data,b.extend({},e,{data:(a=n,i=[],l=[],r.each(a.data,function(e,t){i[t[a.primary_field]]=t,l[t[a.parent_field]]||(l[t[a.parent_field]]=[]),l[t[a.parent_field]][t[a.primary_field]]=t}),a.childs=l,o(a,i,a.top_value,[]))})},a.prototype.eachCols=function(e){return w.eachCols(null,e,this.config.cols),this},a.prototype.renderData=function(e,t,a,i){var v,l=this,g=l.config,n=e[g.response.dataName]||[],o=[],r=[],d=[];if(l.key=g.id||g.index,w.cache[l.key]=n,l.layPage[0==a||0===n.length&&1==t?"addClass":"removeClass"](T),0===n.length)return l.renderForm(),l.layFixed.remove(),l.layMain.find("tbody").html(""),l.layMain.find("."+c).remove(),l.layMain.append('<div class="'+c+'">'+g.text.none+"</div>");layui.each(n,function(c,u){var h,p=[],y=[],f=[],m=c+g.limit*(t-1)+1;0!==u.length&&(h=!!g.treeMode&&!g.tree.childs[u[g.tree.primary_field]],l.eachCols(function(e,a){var t,i,l,n,o=a.field||e,r=g.index+"-"+a.key,d=g.treeMode&&o==g.tree.icon_field,s=u[o];null==s&&(s=""),a.colGroup||(d&&(t=4*u.level,s=(h?'<span class="ml-'+t+'"></span>':'<i class="ml-'+t+" mr-1 fa "+g.tree.icon_close+'"></i>')+s),i=['<td data-field="'+o+'" data-key="'+r+'" '+(n=[],a.edit&&n.push('data-edit="'+a.edit+'"'),a.align&&n.push('align="'+a.align+'"'),a.templet&&n.push('data-content="'+s+'"'),a.toolbar&&n.push('data-off="true"'),a.event&&n.push('lay-event="'+a.event+'"'),a.style&&n.push('style="'+a.style+'"'),a.minWidth&&n.push('data-minwidth="'+a.minWidth+'"'),a.downoff&&n.push('data-downoff="true"'),d&&n.push("data-down"),n.join(" "))+' class="'+(l=[],a.hide&&l.push(T),a.field||l.push("layui-table-col-special"),l.join(" "))+'"><div '+(g.lineHeight?'style="height: '+g.lineHeight+"px;line-height: "+g.lineHeight+'px;"':"")+' class="'+(d?"cursor-pointer":"")+" layui-table-cell laytable-cell-"+("normal"===a.type?r:r+" laytable-cell-"+a.type)+'">'+function(){var e=b.extend(!0,{LAY_INDEX:m},u),t=w.config.checkName;switch(a.type){case"checkbox":return'<input type="checkbox" name="layTableCheckbox" data-id="'+u.id+'" lay-skin="primary" '+(a[t]?(u[t]=a[t],a[t]?"checked":""):e[t]?"checked":"")+">";case"radio":return e[t]&&(v=c),'<input type="radio" name="layTableRadio_'+g.index+'" '+(e[t]?"checked":"")+' lay-type="layTableRadio">';case"numbers":return m}return a.toolbar?x(b(a.toolbar).html()||"").render(e):a.templet?"function"==typeof a.templet?a.templet(e):x(b(a.templet).html()||String(s)).render(e):s}(),"</div></td>"].join(""),p.push(i),a.fixed&&"right"!==a.fixed&&y.push(i),"right"===a.fixed&&f.push(i))}),g.treeMode?o.push('<tr data-index="'+c+'" data-id="'+u.id+'" data-pid="'+u.parentid+'" data-path="'+u.path+'" '+(u.parentid!=g.tree.top_value?'class="layui-hide"':"")+">"+p.join("")+"</tr>"):o.push('<tr data-index="'+c+'">'+p.join("")+"</tr>"),r.push('<tr data-index="'+c+'">'+y.join("")+"</tr>"),d.push('<tr data-index="'+c+'">'+f.join("")+"</tr>"))}),l.layBody.scrollTop(0),l.layMain.find("."+c).remove(),l.layMain.find("tbody").html(o.join("")),l.layFixLeft.find("tbody").html(r.join("")),l.layFixRight.find("tbody").html(d.join("")),l.renderForm(),"number"==typeof v&&l.setThisRowChecked(v),l.syncCheckAll(),l.haveInit?l.scrollPatch():setTimeout(function(){l.scrollPatch()},50),l.haveInit=!0,h.close(l.tipsIndex),g.HAS_SET_COLS_PATCH||l.setColsPatch(),g.HAS_SET_COLS_PATCH=!0,l.renderTotal(n),g.page&&(g.page=b.extend({elem:"layui-table-page"+g.index,count:a,limit:g.limit,limits:g.limits||[15,50,200,500],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>',jump:function(e,t){t||(l.page=e.curr,g.limit=e.limit,l.pullData(e.curr))}},g.page),g.page.count=a,s.render(g.page))},a.prototype.renderTotal=function(e){var d,t=this,s=t.config,c={};s.totalRow&&(layui.each(e,function(e,l){0!==l.length&&t.eachCols(function(e,t){var a=t.field||e,i=l[a];t.totalRow&&(c[a]=(c[a]||0)+(parseFloat(i)||0))})}),d=[],t.eachCols(function(e,t){var a,i,l,n,o=t.field||e,r=['<td data-field="'+o+'" data-key="'+s.index+"-"+t.key+'" '+(n=[],t.align&&n.push('align="'+t.align+'"'),t.style&&n.push('style="'+t.style+'"'),t.minWidth&&n.push('data-minwidth="'+t.minWidth+'"'),n.join(" "))+' class="'+(l=[],t.hide&&l.push(T),t.field||l.push("layui-table-col-special"),l.join(" "))+'">','<div class="layui-table-cell laytable-cell-'+(i=s.index+"-"+t.key,"normal"===t.type?i:i+" laytable-cell-"+t.type)+'">'+(a=t.totalRowText||"",t.totalRow&&parseFloat(c[o]).toFixed(2)||a),"</div></td>"].join("");d.push(r)}),t.layTotal.find("tbody").html("<tr>"+d.join("")+"</tr>"))},a.prototype.getColElem=function(e,t){var a=this.config;return e.eq(0).find(".laytable-cell-"+a.index+"-"+t+":eq(0)")},a.prototype.renderForm=function(e){p.render(e,"LAY-table-"+this.index)},a.prototype.setThisRowChecked=function(e){this.config;var t="layui-table-click";this.layBody.find('tr[data-index="'+e+'"]').addClass(t).siblings("tr").removeClass(t)},a.prototype.sort=function(l,e,t,a){var i,n=this,o={},r=n.config,d=r.elem.attr("lay-filter"),s=w.cache[n.key];"string"==typeof l&&n.layHeader.find("th").each(function(e,t){var a=b(this),i=a.data("field");if(i===l)return l=a,c=i,!1});try{var c=c||l.data("field"),u=l.data("key");if(n.sortKey&&!t&&c===n.sortKey.field&&e===n.sortKey.sort)return;var h=n.layHeader.find("th .laytable-cell-"+u).find(j);n.layHeader.find("th").find(j).removeAttr("lay-sort"),h.attr("lay-sort",e||null),n.layFixed.find("th")}catch(e){return f.error("Table modules: Did not match to field")}if(n.sortKey={field:c,sort:e},!r.autoSort)return r=b.extend(r,{where:{orderBy:c,sortedBy:e}}),n.reload(r),!1;"asc"===e?i=layui.sort(s,c):"desc"===e?i=layui.sort(s,c,!0):(i=layui.sort(s,w.config.indexName),delete n.sortKey),o[r.response.dataName]=i||s,n.renderData(o,n.page,n.count,!0),a&&layui.event.call(l,C,"sort("+d+")",{field:c,type:e})},a.prototype.loading=function(e){var t=this;t.config.loading&&(e?(t.layInit&&t.layInit.remove(),delete t.layInit,t.layBox.find(".layui-table-init").remove()):(t.layInit=b(['<div class="layui-table-init">','<i class="fa fa-spinner fa-spin"></i>',"</div>"].join("")),t.layBox.append(t.layInit)))},a.prototype.setCheckData=function(e,t){var a=this.config,i=w.cache[this.key];i[e]&&i[e].constructor!==Array&&(i[e][a.checkName]=t)},a.prototype.syncCheckAll=function(){function e(a){return t.eachCols(function(e,t){"checkbox"===t.type&&(t[i.checkName]=a)}),a}var t=this,i=t.config,a=t.layHeader.find('input[name="layTableCheckbox"]');a[0]&&(w.checkStatus(t.key).isAll?(a[0].checked||(a.prop("checked",!0),t.renderForm("checkbox")),e(!0)):(a[0].checked&&(a.prop("checked",!1),t.renderForm("checkbox")),e(!1)))},a.prototype.getCssRule=function(a,i){var e=this.elem.find("style")[0],t=e.sheet||e.styleSheet||{},l=t.cssRules||t.rules;layui.each(l,function(e,t){if(t.selectorText===".laytable-cell-"+a)return i(t),!0})},a.prototype.fullSize=function(){var e,t=this,a=t.config,i=a.height;t.fullHeightGap&&((i=L.height()-t.fullHeightGap)<135&&(i=135),t.elem.css("height",i)),i&&(e=parseFloat(i)-(t.layHeader.outerHeight()||38),a.toolbar&&(e-=t.layTool.outerHeight()||50),a.totalRow&&(e-=t.layTotal.outerHeight()||40),a.page&&(e=e-(t.layPage.outerHeight()||41)-2),t.layMain.css("height",e))},a.prototype.getScrollWidth=function(e){var t=0;return e?t=e.offsetWidth-e.clientWidth:((e=document.createElement("div")).style.width="100px",e.style.height="100px",e.style.overflowY="scroll",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),t},a.prototype.scrollPatch=function(){function e(e){var t;i&&l?(e=e.eq(0)).find(".layui-table-patch")[0]||((t=b('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>')).find("div").css({width:i}),e.find("tr").append(t)):e.find(".layui-table-patch").remove()}var t=this,a=t.layMain.children("table"),i=t.layMain.width()-t.layMain.prop("clientWidth"),l=t.layMain.height()-t.layMain.prop("clientHeight"),n=(t.getScrollWidth(t.layMain[0]),a.outerWidth()-t.layMain.width());e(t.layHeader),e(t.layTotal);var o=t.layMain.height()-l;t.layFixed.find(_).css("height",a.height()>=o?o:"auto"),t.layFixRight[0<n?"removeClass":"addClass"](T),t.layFixRight.css("right",i-1)},a.prototype.events=function(){var n,r=this,d=r.config,l=b("body"),o={},e=r.layHeader.find("th"),s=".layui-table-cell",c=d.elem.attr("lay-filter");r.layTool.on("click","*[lay-event]",function(e){function t(e){var t=b(e.list),a=b('<ul class="layui-table-tool-panel"></ul>');a.html(t),d.height&&a.css("max-height",d.height-(r.layTool.outerHeight()||50)),l.find(".layui-table-tool-panel")[0]||l.append(a),r.renderForm(),a.on("click",function(e){layui.stope(e)}),e.done&&e.done(a,t)}var a,i,l=b(this),n=l.attr("lay-event");switch(layui.stope(e),A.trigger("table.tool.panel.remove"),h.close(r.tipsIndex),n){case"LAYTABLE_COLS":t({list:(i=[],r.eachCols(function(e,t){t.field&&"normal"==t.type&&i.push('<li><input type="checkbox" name="'+t.field+'" data-key="'+t.key+'" data-parentkey="'+(t.parentKey||"")+'" lay-skin="primary" '+(t.hide?"":"checked")+' title="'+(t.title||t.field)+'" lay-filter="LAY_TABLE_TOOL_COLS"></li>')}),i.join("")),done:function(){p.on("checkbox(LAY_TABLE_TOOL_COLS)",function(e){var t=b(e.elem),l=this.checked,n=t.data("key"),o=t.data("parentkey");layui.each(d.cols,function(i,e){layui.each(e,function(e,t){var a;i+"-"+e===n&&(a=t.hide,t.hide=!l,r.elem.find('*[data-key="'+d.index+"-"+n+'"]')[l?"removeClass":"addClass"](T),a!=t.hide&&r.setParentCol(!l,o),r.resize())})})})}});break;case"LAYTABLE_EXPORT":t({list:(a=[],d.export.can&&a.push('<li data-type="checked">导出选中</li>'),d.export.all&&a.push('<li data-type="all">导出当前列表</li>'),a.join("")),done:function(e,t){var n=!1;t.on("click",function(){var e=b(this).data("type"),a=b(this),t={},i=void 0;if(!0===n)return!1;if("checked"===e){var l=w.checkStatus(d.id);if(l.data.length<1)return h.msg("请选择需要下载的数据"),!1;i=l.data.map(function(e){return e.id}).join(",")}else"all"===e&&(i="all",t=b.extend(t,d.where));n=!0,a.append('<i class="fa fa-spinner fa-spin ml-1"></i>'),m.request.ajax({url:d.export.url,type:"post",data:b.extend(t,{ids:i}),cache:!1,success:function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,parent.document.body.appendChild(t),t.click(),parent.document.body.removeChild(t),n=!1,a.find("i").remove()}})})}});break;case"LAYTABLE_REFRESH":d.hasRefresh?r.reload(d):location.reload();break;case"clearFilter":var o=l.data("name");delete g[o],delete k[o],delete d.where[o],l.parents(".filterbox ").remove(),r.reload(d)}layui.event.call(this,C,"toolbar("+c+")",b.extend({event:n,config:d},{}))}),e.on("mousemove",function(e){var t=b(this),a=t.offset().left,i=e.clientX-a;t.data("unresize")||o.resizeStart||(o.allowResize=t.width()-i<=10,l.css("cursor",o.allowResize?"col-resize":""))}).on("mouseleave",function(){b(this);o.resizeStart||l.css("cursor","")}).on("mousedown",function(e){var t,a=b(this);o.allowResize&&(t=a.data("key"),e.preventDefault(),o.resizeStart=!0,o.offset=[e.clientX,e.clientY],r.getCssRule(t,function(e){var t=e.style.width||a.outerWidth();o.rule=e,o.ruleWidth=parseFloat(t),o.minWidth=a.data("minwidth")||d.cellMinWidth}))}),A.on("mousemove",function(e){var t;o.resizeStart&&(e.preventDefault(),o.rule&&((t=o.ruleWidth+e.clientX-o.offset[0])<o.minWidth&&(t=o.minWidth),o.rule.style.width=t+"px",h.close(r.tipsIndex)),n=1)}).on("mouseup",function(e){o.resizeStart&&(o={},l.css("cursor",""),r.scrollPatch()),2===n&&(n=null)}),e.on("click",function(e){var t,a=b(this),i=a.find(j),l=i.attr("lay-sort");if(!i[0]||1===n)return n=2;t="asc"===l?"desc":"desc"===l?null:"asc",r.sort(a,t,null,!0)}).find(j+" .layui-edge ").on("click",function(e){var t=b(this),a=t.index(),i=t.parents("th").eq(0).data("field");layui.stope(e),0===a?r.sort(i,"asc",null,!0):r.sort(i,"desc",null,!0)});function u(e){var t=b(this).parents("tr").eq(0).data("index"),l=r.layBody.find('tr[data-index="'+t+'"]'),n=w.cache[r.key][t];return b.extend({tr:l,data:w.clearCacheKey(n),del:function(){w.cache[r.key][t]=[],l.remove(),r.scrollPatch()},update:function(e){e=e||{},layui.each(e,function(a,e){var i,t;a in n&&(t=l.children('td[data-field="'+a+'"]'),n[a]=e,r.eachCols(function(e,t){t.field==a&&t.templet&&(i=t.templet)}),t.children(s).html(i?"function"==typeof i?i(n):x(b(i).html()||e).render(n):e),t.data("content",e))})}},e)}r.elem.on("click",'input[name="layTableCheckbox"]+',function(){var e=b(this).prev(),t=r.layBody.find('input[name="layTableCheckbox"]'),a=e.parents("tr").eq(0).data("index"),i=e[0].checked,l="layTableAllChoose"===e.attr("lay-filter");l?(t.each(function(e,t){t.checked=i,r.setCheckData(e,i)}),r.syncCheckAll(),r.renderForm("checkbox")):(r.setCheckData(a,i),r.syncCheckAll()),layui.event.call(e[0],C,"checkbox("+c+")",u.call(e[0],{checked:i,type:l?"all":"one"}))}),r.elem.on("click",'input[lay-type="layTableRadio"]+',function(){var e=b(this).prev(),t=e[0].checked,a=w.cache[r.key],i=e.parents("tr").eq(0).data("index");layui.each(a,function(e,t){i===e?t.LAY_CHECKED=!0:delete t.LAY_CHECKED}),r.setThisRowChecked(i),layui.event.call(this,C,"radio("+c+")",u.call(this,{checked:t}))}),r.layBody.on("mouseenter","tr",function(){var e=b(this).index();r.layBody.find("tr:eq("+e+")").addClass(E)}).on("mouseleave","tr",function(){var e=b(this).index();r.layBody.find("tr:eq("+e+")").removeClass(E)}).on("click",".layui-table-fixed-r tr",function(){t.call(this,"row")}).on("dblclick","tr",function(){t.call(this,"rowDouble")});var t=function(e){var t=b(this);layui.event.call(this,C,e+"("+c+")",u.call(t.children("td")[0]))};r.layBody.on("change","."+S,function(){var e=b(this),t=this.value,a=e.parent().data("field"),i=e.parents("tr").eq(0).data("index");w.cache[r.key][i][a]=t,layui.event.call(this,C,"edit("+c+")",u.call(this,{value:t,field:a}))}).on("blur","."+S,function(){var a,e,t=b(this),i=t.parent().data("field"),l=t.parents("tr").eq(0).data("index"),n=w.cache[r.key][l];r.eachCols(function(e,t){t.field==i&&t.templet&&(a=t.templet)}),t.siblings(s).html((e=this.value,a?function(){return"function"==typeof a?a(n):x(b(a).html()||this.value).render(n)}():e)),t.parent().data("content",this.value),t.remove()}),r.layBody.on("click","td",function(e){var t=b(this),a=(t.data("field"),t.data("edit")),i=t.children(s);if(!t.data("off")&&a){var l=b('<input class="layui-input '+S+'">');return l[0].value=t.data("content")||i.text(),t.find("."+S)[0]||t.append(l),l.focus(),void layui.stope(e)}}).on("mouseenter","td",function(){a.call(this)}).on("mouseleave","td",function(){a.call(this,"hide")});var i="layui-table-grid-down",a=function(e){var t=b(this),a=t.children(s);if(e)t.find(".layui-table-grid-down").remove();else if(!t.data("downoff")&&a.prop("scrollWidth")>a.outerWidth()){if(a.find("."+i)[0])return;t.append('<div class="'+i+'"><i class="fa fa-down"></i></div>')}};r.layBody.on("click","."+i,function(e){var t=b(this).parent().children(s);r.tipsIndex=h.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(t.height()+16)+"px;"+("sm"===d.size?"padding: 4px 15px; font-size: 12px;":"lg"===d.size?"padding: 14px 15px;":"")+'">',t.html(),"</div>",'<i class="fa layui-table-tips-c fa-close"></i>'].join(""),t[0],{tips:[3,""],time:-1,anim:-1,maxWidth:v.ios||v.android?300:r.elem.width()/2,isOutAnim:!1,skin:"layui-table-tips",success:function(e,t){e.find(".layui-table-tips-c").on("click",function(){h.close(t)})}}),layui.stope(e)}),r.layBody.on("click","*[lay-event]",function(){var e=b(this),t=e.attr("lay-event"),a=e.parents("tr").eq(0).data("index"),i=u.call(this,{event:t});d.autoShow&&"show"==t?b.ajax({type:"get",url:d.autoShow.replace("_id_",i.data.id),success:function(e){m.openModal(e,"详情#"+i.data.id,{shadeClose:!0,area:v.mobile?d.autoShowWidthMobile:d.autoShowWidth})},error:function(){h.msg("网络错误，请刷新重试!")}}):layui.event.call(this,C,"tool("+c+")",i),r.setThisRowChecked(a)}),r.layMain.on("scroll",function(){var e=b(this),t=e.scrollLeft(),a=e.scrollTop();r.layHeader.scrollLeft(t),r.layTotal.scrollLeft(t),r.layFixed.find(_).scrollTop(a),h.close(r.tipsIndex)}),A.on("click",function(){A.trigger("table.remove.tool.panel")}),A.on("table.remove.tool.panel",function(){b(".layui-table-tool-panel").remove()}),L.on("resize",function(){r.resize()}),d.canSearch&&p.on("submit(*)",function(e){var t=e.field.wd,a={},i={},l=b(e.elem).attr("data-type");b(e.elem).attr("data-table");return"cancel"==l?(i=b.extend(d.where,{search:""}),a={where:d.treeMode?{where:i}:{where:i,page:{curr:1}}}):M!=t||0<t.length?(M=t,i=b.extend(d.where,{search:e.field.wd,searchFields:d.searchFields}),a=d.treeMode?{where:i}:{where:i,page:{curr:1}}):h.msg("请输入关键字"),r.reload(a),!1}),d.filters&&r.layHeader.on("click","*[lay-event]",function(){var e=b(this),t=e.parents("ul").data("name"),a=e.parents(".layui-table-cell").find("span").text(),i=e.attr("lay-event"),l={},n={};l[t]=i,n[t]={label:a,val:e.text()},g=b.extend(g,l),k=b.extend(k,n),d=b.extend(d,{where:b.extend(d.where,g)}),r.reload(d)}),d.treeMode&&r.layBody.off("click","[data-down]").on("click","[data-down]",function(){var e=b(this),a=e.parent("tr"),i=e.find("i").hasClass(d.tree.icon_open);r.layBody.find("tr[data-path*='"+a.data("path")+"']").each(function(){var e=b(this),t=e.find("td[data-down] i");a.data("path")!=e.data("path")?i?(e.addClass("layui-hide"),t.removeClass(d.tree.icon_open).addClass(d.tree.icon_close)):e.data("pid")==a.data("id")&&e.removeClass("layui-hide"):i?t.removeClass(d.tree.icon_open).addClass(d.tree.icon_close):t.removeClass(d.tree.icon_close).addClass(d.tree.icon_open)})})},w.init=function(a,i){i=i||{};var e=b(a?'table[lay-filter="'+a+'"]':".layui-table[lay-data]"),r="Table element property lay-data configuration item has a syntax error: ";return e.each(function(){var e=b(this),t=e.attr("lay-data");try{t=new Function("return "+t)()}catch(e){f.error(r+t)}var n=[],o=b.extend({elem:this,cols:[],data:[],id:a,hasRefresh:!1,skin:e.attr("lay-skin"),size:e.attr("lay-size"),even:"string"==typeof e.attr("lay-even")},w.config,i,t);a&&e.hide(),e.find("thead>tr").each(function(l){o.cols[l]=[],b(this).children().each(function(e){var t=b(this),a=t.attr("lay-data");try{a=new Function("return "+a)()}catch(e){return f.error(r+a)}var i=b.extend({title:t.text(),colspan:t.attr("colspan")||0,rowspan:t.attr("rowspan")||0},a);i.colspan<2&&n.push(i),o.cols[l].push(i)})}),e.find("tbody>tr").each(function(e){var i=b(this),l={};i.children("td").each(function(e,t){var a=b(this),i=a.data("field");if(i)return l[i]=a.html()}),layui.each(n,function(e,t){var a=i.children("td").eq(e);l[t.field]=a.html()}),o.data[e]=l}),w.render(o)}),this},r.that={},r.config={},w.eachCols=function(e,i,l){var t=r.config[e]||{},n=[],o=0;l=b.extend(!0,[],l||t.cols),layui.each(l,function(t,e){layui.each(e,function(e,a){var i;a.colGroup&&(i=0,o++,a.CHILD_COLS=[],layui.each(l[t+1],function(e,t){t.PARENT_COL_INDEX||1<i&&i==a.colspan||(t.PARENT_COL_INDEX=o,a.CHILD_COLS.push(t),i+=parseInt(1<t.colspan?t.colspan:1))})),a.PARENT_COL_INDEX||n.push(a)})});!function a(e){layui.each(e||n,function(e,t){return t.CHILD_COLS?a(t.CHILD_COLS):void("function"==typeof i&&i(e,t))})}()},w.checkStatus=function(e){var a=0,i=0,l=[],t=w.cache[e]||[];return layui.each(t,function(e,t){t.constructor!==Array?t[w.config.checkName]&&(a++,l.push(w.clearCacheKey(t))):i++}),{data:l,isAll:!!t.length&&a===t.length-i}},w.setChecked=function(e,t,a){i(e)&&((w.cache[e]||[])[t][options.checkName]=a)},w.resize=function(e){if(e){if(!i(e))return;r.that[e].resize()}else layui.each(r.that,function(){this.resize()})},w.reload=function(e,t){t=t||{};var a=i(e);if(a)return t.data&&t.data.constructor===Array&&delete a.data,w.render(b.extend(!0,{},a,t))},w.render=function(e){var t=new a(e);return r.call(t)},w.clearCacheKey=function(e){return delete(e=b.extend({},e))[w.config.checkName],delete e[w.config.indexName],e},w.init(),e(C,w)});