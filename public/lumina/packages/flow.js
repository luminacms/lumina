"use strict";layui.define("jquery",function(e){function l(){}var g=layui.$;l.prototype.load=function(e){var t,i,n,l=this,o=0,r=g((e=e||{}).elem);if(r[0]){var a=g(e.scrollElem||document),c=e.mb||50,m=!("isAuto"in e)||e.isAuto,f=e.end||"没有更多了",s=e.scrollElem&&e.scrollElem!==document,u="<cite>加载更多</cite>",y=g('<div class="layui-flow-more"><a href="javascript:;">'+u+"</a></div>");r.find(".layui-flow-more")[0]||r.append(y);var d,h=function(e,l){e=g(e),y.before(e),(l=0==l||null)?y.html(f):y.find("a").html(u),i=l,t=null,d&&d()},p=function(){t=!0,y.find("a").html('<i class="layui-anim layui-anim-rotate layui-anim-loop fa ">&#xe63e;</i>'),"function"==typeof e.done&&e.done(++o,h)};return(p(),y.find("a").on("click",function(){g(this);i||t||p()}),e.isLazyimg&&(d=l.lazyimg({elem:e.elem+" img",scrollElem:e.scrollElem})),m)?(a.on("scroll",function(){var l=g(this),o=l.scrollTop();n&&clearTimeout(n),i||(n=setTimeout(function(){var e=s?l.height():g(window).height();(s?l.prop("scrollHeight"):document.documentElement.scrollHeight)-o-e<=c&&(t||p())},100))}),l):l}},l.prototype.lazyimg=function(e){function c(l,e){var o,t=s.scrollTop(),i=t+e,n=y?l.offset().top-s.offset().top+t:l.offset().top;t<=n&&n<=i&&(l.attr("src")||(o=l.attr("lay-src"),layui.img(o,function(){var e=m.lazyimg.elem.eq(f);l.attr("src",o).removeAttr("lay-src"),e[0]&&r(e),f++})))}var l,o,m=this,f=0,s=g((e=e||{}).scrollElem||document),u=e.elem||"img",y=e.scrollElem&&e.scrollElem!==document,r=function(e,l){var o=y?(l||s).height():g(window).height(),t=s.scrollTop(),i=t+o;if(m.lazyimg.elem=g(u),e)c(e,o);else for(var n=0;n<m.lazyimg.elem.length;n++){var r=m.lazyimg.elem.eq(n),a=y?r.offset().top-s.offset().top+t:r.offset().top;if(c(r,o),f=n,i<a)break}};return r(),l||(s.on("scroll",function(){var e=g(this);o&&clearTimeout(o),o=setTimeout(function(){r(null,e)},50)}),l=!0),r},e("flow",new l)});