"use strict";layui.define(["table"],function(e){var r=layui.jquery,a=layui.table,t=layui.layer,l="",c={};e("pickerUser",{init:function(){var t=this;r("*[lay-picker-user]").each(function(){var e=r(this);e.prop("readonly",!0).addClass("hand"),e.on("click",function(){t.handUserPicker(t)})})},close:function(){t.close(l)},render:function(e){c=r.extend(c,e);var i="/interface/users";l=t.open({type:1,title:"员工选择器",btn:["选择","取消"],area:["800px","500px"],content:'<div class="layui-card"><div class="layui-card-body"><table id="picker_user_table" lay-filter="picker_user_table"></table></div></div>',yes:function(){var e=a.checkStatus("picker_user_table");"function"==typeof c.done&&c.done(e.data,l)},no:function(){t.close(l)},success:function(){a.render({elem:"#picker_user_table",url:i,size:"sm",width:"500px",height:"350px",page:!0,toolbar:!0,defaultToolbar:["filter"],autoSort:!1,cellMinWidth:80,cols:[[{type:"checkbox",fixed:"left"},{field:"id",width:80,title:"ID",sort:!0,fixed:"left",templet:"#table_id_tpl"},{field:"name",width:200,title:"姓名"},{field:"email",width:200,title:"邮箱"},{field:"created_at",width:150,fixed:"right",title:"创建时间"}]]}),a.on("row(picker_user_table)",function(e){}),a.on("sort(picker_user_table)",function(e){a.reload("picker_user_table",{initSort:e,where:{orderBy:e.field,sortedBy:e.type}})}),a.on("toolbar(picker_user_table)",function(e){var t="";"search"==e.event&&(t=r("#picker_user_search").val(),a.reload("picker_user_table",{url:i,where:{search:t,searchFields:"name:like;email:="},page:{curr:1}}))})}})}})});