"use strict";layui.define(["jquery","laytpl","layer"],function(i){function n(i){var n=this;n.config=$.extend({},n.config,a.config,i),layui.addcss("extends/flowDesign/flowDesign.css",function(){$(".dingflow-design").show(),n.render(),n.events()})}var o=layui.laytpl,t=layui.layer,e="flowDesign",s="",c='<div class="add-node-btn-box"><div class="add-node-btn"><button class="btn j_btn" type="button"><i class="fa fa-plus"></i></button></div></div>',d=['<div class="node-wrap">','<div class="node-wrap-box node_sid-startevent start-node">','<div class="title" style="background: {{ d.bgColor }};"><i class="fa fa-{{ d.icon }}"></i><span class="">{{ d.title}}</span><i class="fa fa-close close"></i></div>','<div class="content"><div class="text">周小杰</div><i class="fa fa-angle-right"></i></div></div>',c,"</div>"].join(""),l=['<div class="col-box">','<div class="condition-node">','<div class="condition-node-box"><div class="auto-judge">','<div class="title-wrapper"><span class="editable-title">条件1</span><span class="priority-title">优先级1</span><i class="anticon anticon-close close"></i></div>','<div class="content">请设置条件</div><div class="sort-right">&gt;</div></div>',c,"</div></div>{{ d.ccnode }}</div>"].join(""),a={config:{},set:function(i){var n=this;return n.config=$.extend({},n.config,i),n},on:function(i,n){return layui.onevent.call(this,e,i,n)}};n.prototype.config={data:{}},n.prototype.event=function(i,n){return layui.event.call(this,e,"btn("+i+")",n)},n.prototype.on=function(i,n){return layui.onevent.call(this,e,i,n)},n.prototype.render=function(){var i=this.config,e=this,n=$(this.config.elem);$.each(i.data,function(i,n){s+=e.renderNode(n)}),n.append(s+'<div class="end-node"><div class="end-node-circle"></div><div class="end-node-text">流程结束</div></div>')},n.prototype.renderNode=function(e){var t=this;switch(e.type){case"approver":return o(d).render({bgColor:"#FF943E",title:"审批人",icon:"user"});case"cc":return o(d).render({bgColor:"#3296FA",title:"抄送人",icon:"paper-plane"});case"map":var s="",a="";return $.each(e.children,function(i,n){a="",0==i&&(a+='<div class="top-left-cover-line"></div><div class="bottom-left-cover-line"></div>'),i==e.children.length-1&&(a+='<div class="top-right-cover-line"></div><div class="bottom-right-cover-line"></div>'),$.each(n.map,function(i,n){a+=t.renderNode(n)}),s+=o(l).render({ccnode:a})}),['<div class="branch-wrap"><div class="branch-box-wrap">','<div class="branch-box"><button class="add-branch">添加条件</button>',s,"</div>",c,"</div></div>"].join("")}},n.prototype.events=function(i){var n=this.config,e=['<a href="javascript:;">审批人</a>','<a href="javascript:;">抄送人</a>','<a href="javascript:;">条件分支</a>'];$(n.elem).on("click",".j_btn",function(){t.tips(e,$(this),{time:0,shade:.1,shadeClose:!0})})},a.render=function(i){return function(){return{config:self.config}}.call(new n(i))},i(e,a)});